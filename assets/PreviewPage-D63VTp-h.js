import{r as l,j as e}from"./vendor-BJAOCLFF.js";import{c,T as d,a as m,b as h,B as x,u as j,R as b,r as f}from"./index-DF8bE_om.js";import{h as w,i as y,j as v,k as P}from"./ui-vendor-Brtqijad.js";import{ad as C,ae as N,a9 as T}from"./lucide-react-rgKbjvdd.js";import{d as S}from"./state-BErW7EvM.js";import"./utils-uvPUNtyq.js";import"./dnd-kit-CF5ZvFCr.js";import"./router-Lx8uxIVW.js";const p=()=>{const i=l.useMemo(()=>{const t=navigator.userAgent.toLowerCase(),a=/safari/.test(t)&&!/chrome/.test(t),r=/chrome/.test(t)&&!/edg/.test(t),o=/firefox/.test(t),n=/edg/.test(t),u=/mobile|android|iphone|ipad/.test(t);return{isSafari:a,isChrome:r,isFirefox:o,isEdge:n,isMobile:u,userAgent:t}},[]);return{...i,getPrintTip:()=>{const{isChrome:t,isMobile:a}=i;return a?{tip:"💡 移动端建议在电脑上打开此页面进行打印或保存PDF",shortcut:""}:t?{tip:'💡 Chrome用户：点击打印按钮，目标打印机选择"另存为PDF"',shortcut:"Ctrl+P (Cmd+P)"}:{tip:"💡 点击打印按钮或使用快捷键打印简历，可选择保存为PDF",shortcut:"Ctrl+P (Cmd+P)"}}}},E=()=>{const{isChrome:i,isMobile:s}=p(),t=()=>s?"建议在电脑上打开以获得更好的打印效果":i?'Chrome - 建议使用浏览器的"打印"功能，目标选择"另存为PDF"':'建议使用最新版本Chrome浏览器的"打印"功能导出为 PDF';return e.jsxs("div",{className:"bg-gray-100 text-center py-6 text-gray-600 text-sm print:hidden",children:[e.jsxs("p",{children:["简历预览 - ",t()]}),e.jsx("p",{className:"mt-1",children:"调整浏览器打印设置可以获得更好的效果"})]})};function k({className:i,defaultValue:s,value:t,min:a=0,max:r=100,...o}){const n=l.useMemo(()=>Array.isArray(t)?t:Array.isArray(s)?s:[a,r],[t,s,a,r]);return e.jsxs(w,{"data-slot":"slider",defaultValue:s,value:t,min:a,max:r,className:c("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",i),...o,children:[e.jsx(y,{"data-slot":"slider-track",className:c("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(v,{"data-slot":"slider-range",className:c("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:n.length},(u,g)=>e.jsx(P,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},g))]})}const A=()=>{const[i,s]=l.useState(80),t=r=>{const o="custom-print-scale-style";let n=document.getElementById(o);n&&n.remove(),n=document.createElement("style"),n.id=o,n.innerHTML=`
      @media print {
        body {
          zoom: ${r/100};
        }
      }
    `,document.head.appendChild(n)},a=r=>{s(r),t(r)};return l.useEffect(()=>(t(i),()=>{const o=document.getElementById("custom-print-scale-style");o&&o.remove()}),[]),{scale:i,setScale:s,onScaleChange:a}},F=({onPrint:i,onExportPdf:s})=>{const{getPrintTip:t}=p(),{tip:a}=t(),{scale:r,onScaleChange:o}=A();return e.jsx("div",{className:"bg-blue-600 text-white p-3 text-center print:hidden",children:e.jsxs("div",{className:"flex items-center justify-between space-x-4 max-w-4xl px-4 mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:"缩放比例"}),e.jsxs(d,{children:[e.jsx(m,{asChild:!0,children:e.jsx(C,{className:"w-4 h-4 text-blue-200"})}),e.jsx(h,{children:e.jsx("p",{children:"通过修改缩放比例，可以控制每页简历内容的显示大小。"})})]}),e.jsx(k,{defaultValue:[r],max:100,step:1,className:"w-20",onValueChange:n=>o(n[0])}),r,"%"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(d,{children:[e.jsx(m,{asChild:!0,children:e.jsxs(x,{onClick:i,variant:"outline",size:"sm",className:"bg-white text-blue-600 hover:bg-gray-100",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"打印简历"]})}),e.jsx(h,{children:e.jsx("p",{children:a})})]}),e.jsxs(d,{children:[e.jsx(m,{asChild:!0,children:e.jsxs(x,{onClick:s,variant:"outline",size:"sm",className:"bg-white text-blue-600 hover:bg-gray-100",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"导出JSON"]})}),e.jsx(h,{children:e.jsx("p",{children:"导出JSON文件，可用于导入(头像会丢失)"})})]})]})]})})},z=()=>{const i=S(f),{handleExportJson:s}=j(),t=()=>{window.print()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 print:bg-white",children:[e.jsx(F,{onPrint:t,onExportPdf:s}),e.jsx(b,{resume:i,isEditable:!1,className:"max-w-4xl mx-auto p-4 bg-white min-h-screen print:p-2 print:max-w-none"}),e.jsx(E,{})]})},_=()=>e.jsx(z,{});export{_ as PreviewPage};
