const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewPage-B3szhkJr.js","assets/vendor-BJAOCLFF.js","assets/utils-uvPUNtyq.js","assets/ui-vendor-CnMZcgvn.js","assets/lucide-react-rgKbjvdd.js","assets/state-Djsv7-lw.js","assets/dnd-kit-CF5ZvFCr.js","assets/image-crop-DlUlnxqA.js","assets/image-crop-OEN34m2J.css","assets/router-Lx8uxIVW.js"])))=>i.map(i=>d[i]);
import{j as e,r as h,R as Ze,m as et}from"./vendor-BJAOCLFF.js";import{t as tt,c as ke,a as ve,d as st}from"./utils-uvPUNtyq.js";import{a as A,u as Pe,b as O,c as at,d as Y,P as nt}from"./state-Djsv7-lw.js";import{X as ye,I as Se,C as it,T as rt,a as ot,b as q,U as Te,M as Re,P as Ae,c as lt,H as ct,d as dt,B as mt,e as ut,G as xt,A as ht,f as gt,R as pt,g as ft,D as bt,h as jt,i as vt,W as yt,S as Nt,j as St,k as wt,l as te,m as Ct,L as It,n as Et,o as Dt,Y as kt,F as Pt,p as Tt,q as Rt,r as At,s as Ft,t as Mt,u as zt,v as Ot,w as Bt,x as Lt,y as $t,z as Ut,E as Vt,J as Fe,K as Ne,N as _t,O as Ht,Q as Me,V as Jt,Z as Gt,_ as Wt,$ as Qt,a0 as Yt,a1 as Xt,a2 as $,a3 as qt,a4 as Kt,a5 as se,a6 as Zt,a7 as es,a8 as ts,a9 as ss,aa as as,ab as ns,ac as ze}from"./lucide-react-rgKbjvdd.js";import{S as is,O as Oe,P as rs,C as Be,a as os,T as Le,D as $e,R as ls,b as Ue,c as cs,d as ds,e as ms,f as us,A as xs,g as hs}from"./ui-vendor-CnMZcgvn.js";import{u as ae,a as ne,P as ie,v as re,b as oe,c as le,C as ce,D as de,S as me}from"./dnd-kit-CF5ZvFCr.js";import{L as gs,B as ps,S as fs}from"./image-crop-DlUlnxqA.js";import{H as bs,R as js,a as we}from"./router-Lx8uxIVW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const vs="modulepreload",ys=function(t){return"/"+t},Ce={},Ns=function(s,a,n){let r=Promise.resolve();if(a&&a.length>0){let l=function(c){return Promise.all(c.map(m=>Promise.resolve(m).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");r=l(a.map(c=>{if(c=ys(c),c in Ce)return;Ce[c]=!0;const m=c.endsWith(".css"),u=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":vs,m||(x.as="script"),x.crossOrigin="",x.href=c,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((g,S)=>{x.addEventListener("load",g),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return r.then(o=>{for(const d of o||[])d.status==="rejected"&&i(d.reason);return s().catch(i)})};function M(...t){return tt(ke(t))}const X=A([]),Ss=A(null,(t,s,a)=>{const n=t(X),r={...a,id:Date.now().toString()+Math.random().toString(36).substr(2,9)};return s(X,[...n,r]),r.id}),Ve=A(null,(t,s,a)=>{const n=t(X);s(X,n.filter(r=>r.id!==a))});A(null,(t,s)=>{s(X,[])});const ws=ve("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Cs({className:t,variant:s,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:M(ws({variant:s}),t),...a})}function Is({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:M("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}const Es=t=>{switch(t){case"error":return{icon:ot,variant:"destructive",className:"border-red-200 bg-red-50 text-red-800"};case"warning":return{icon:rt,variant:"default",className:"border-yellow-200 bg-yellow-50 text-yellow-800"};case"success":return{icon:it,variant:"default",className:"border-green-200 bg-green-50 text-green-800"};case"info":return{icon:Se,variant:"default",className:"border-blue-200 bg-blue-50 text-blue-800"};default:return{icon:Se,variant:"default",className:"border-gray-200 bg-gray-50 text-gray-800"}}},Ds=({message:t})=>{const s=O(Ve),a=Es(t.type),n=a.icon,r=()=>{s(t.id)};return e.jsxs(Cs,{variant:a.variant,className:M("relative transition-all duration-300 ease-in-out",a.className),children:[e.jsx(n,{className:"h-4 w-4"}),e.jsx(Is,{className:"pr-8",children:t.message}),e.jsx("button",{onClick:r,className:"absolute right-2 top-2 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":"关闭",children:e.jsx(ye,{className:"h-4 w-4"})})]})},ks=({children:t})=>{const[s]=Pe(X);return e.jsxs(e.Fragment,{children:[t,s.length>0&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] w-full max-w-md px-4",children:e.jsx("div",{className:"space-y-2",children:s.map(a=>e.jsx(Ds,{message:a},a.id))})})]})},Ps=ve("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=h.forwardRef(({className:t,variant:s,size:a,asChild:n=!1,...r},i)=>{const o=n?is:"button";return e.jsx(o,{className:M(Ps({variant:s,size:a,className:t})),ref:i,...r})});w.displayName="Button";const W=ls,Ts=rs,_e=h.forwardRef(({className:t,...s},a)=>e.jsx(Oe,{ref:a,className:M("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));_e.displayName=Oe.displayName;const U=h.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(Ts,{children:[e.jsx(_e,{}),e.jsxs(Be,{ref:n,className:M("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(os,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));U.displayName=Be.displayName;const Q=({className:t,...s})=>e.jsx("div",{className:M("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Q.displayName="DialogHeader";const He=({className:t,...s})=>e.jsx("div",{className:M("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});He.displayName="DialogFooter";const V=h.forwardRef(({className:t,...s},a)=>e.jsx(Le,{ref:a,className:M("text-lg font-semibold leading-none tracking-tight",t),...s}));V.displayName=Le.displayName;const _=h.forwardRef(({className:t,...s},a)=>e.jsx($e,{ref:a,className:M("text-sm text-muted-foreground",t),...s}));_.displayName=$e.displayName;const Rs=({isOpen:t,onClose:s,onConfirm:a})=>e.jsx(W,{open:t,onOpenChange:s,children:e.jsxs(U,{className:"max-w-md",children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"确认清空简历"})]}),e.jsx(_,{children:"此操作将永久删除所有简历内容，请谨慎操作。"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"确定要清空所有简历内容吗？此操作将删除所有已保存的数据，并恢复初始状态"}),e.jsx("p",{className:"text-red-600 text-sm mt-4 font-medium",children:"⚠️ 此操作无法撤销，请谨慎操作！"})]}),e.jsxs(He,{className:"flex space-x-2",children:[e.jsx(w,{variant:"outline",onClick:s,className:"min-w-[80px]",children:"取消"}),e.jsx(w,{onClick:a,className:"min-w-[80px] bg-red-600 hover:bg-red-700",children:"确认清空"})]})]})}),Je={id:"1",title:"我的简历",template:"default",layout:"top-bottom",pageSettings:{enableMultiPage:!0,totalPages:2},sections:[{id:"basic-info",title:"基本信息",iconName:"user",type:"basic",visible:!0,order:1,data:{avatar:"https://imgs.aixifan.com/o_1eemg57nh11nd4d01p9d17i31vi67.gif",name:"温莎",email:"wenzhewu2@163.com",phone:"12345678901",gender:"男",age:"22",location:"上海",website:"",customFields:[{id:"1",label:"期望城市",value:"上海",iconName:"map-pin"},{id:"2",label:"个人网站",value:"https://nekolin.top",iconName:"globe"}]}},{id:"education",title:"教育背景",iconName:"graduation-cap",type:"timeline",editorType:"timeline",visible:!0,order:2,data:[{id:"1",title:"上海杉达学院",subtitle:"软件工程学士",secondarySubtitle:"2024.09 - 2026.06",startDate:"2024.09",endDate:"2026.06",description:`【主修课程】计算机组成原理、计算机网络、操作系统、数据结构、数据库原理及技术、软件需求工程、软件测试、Java Web开发n【绩点成绩】3.31/4.0
【在校荣誉】校计算机设计大赛三等奖
【证书】计算机三级（Java）`},{id:"2",title:"上海电子信息职业技术学院",subtitle:"人工智能应用技术大专",secondarySubtitle:"2021.09 - 2024.06",startDate:"2021.09",endDate:"2024.06",description:`【主修课程】Linux操作系统、Python程序设计、机器视觉技术、机器学习、深度学习、嵌入式技术应用
【绩点成绩】4.13/5.0
【专业排名】3/80
【在校荣誉】2022年华为ICT大赛上海市云赛道三等奖，上海市优秀毕业生，宝山区优秀志愿者，校级二等奖学金*1、三等奖学金*1，校级三好学生、优秀志愿者
【证书】CET4、驾驶证`}]},{id:"projects",title:"项目经历",iconName:"settings",type:"timeline",editorType:"timeline",visible:!0,order:3,data:[{description:`【项目概述】一个基于 shape predictor 68 face landmarks 构建的人脸识别瞌睡检测，提供驾驶员疲劳追踪的体验。
【技术实现】该项目是一个基于 68 点人脸特征标记，利用 dlib、OpenCV、PySide6 等库，通过分析眼睛状态、嘴部状态及头部姿态实现实时瞌睡检测，并配备 UI 界面与警报功能的系统。 `,endDate:"",id:"1756977218779",secondarySubtitle:"github.com/WindsorWu/Face-recognition-sleepiness-detection",startDate:"2023.09-2023.11",subtitle:"全栈开发",title:"瞌睡检测系统"},{description:`【项目概述】话咔咔聊天系统创意源于市场对适合重要信息交流的高效通讯工具的需求，具备注册登录、好友管理、聊天（一对一及群组，支持文本和表情）、通知及消息同步功能，旨在提供安全高效的通讯平台，支持快速部署与个性化定制，适用于公司或校园内部使用。
【技术实现】该系统采用 B/S 与 C/S 架构结合的方式，后端以Spring Boot为核心，搭配 Redis、RabbitMQ、MySQL及MyBatis-Plus，前端运用 Vue 3+Vite，同时集成 WebSocket、Axios 等保障实时通讯，包含登录注册、好友管理、聊天群组、个人中心等功能页面，技术选型兼顾开发效率、性能与用户体验。
项目获得2024年度上海杉达学院计算机设计大赛三等奖`,endDate:"",id:"1758469873123",secondarySubtitle:"",startDate:"2024.10-2024.12",subtitle:"数据库开发",title:"话咔咔聊天系统"},{description:`【项目概述】基于Spring Boot和Vue框架的商城系统。系统主要功能包括：商品的上架、删除、查询、浏览，用户的注册、登录、密码修改，购物车管理，订单生成与管理等。
【技术实现】前端使用 Vue 框架开发，后端使用 Spring Boot，项目采用Maven 进行依赖管理，数据持久化采用MySQL数据库。在Docker容器中部署，使用Redis 服务器、RabbitMQ 消息队列和ElasticSearch 搜索结果搜索引擎作为中间服务。`,endDate:"",id:"1758469873123",secondarySubtitle:"",startDate:"2025.03-2025.06",subtitle:"全栈开发",title:"商城系统"},{description:`【项目概述】HyperOS EU用户可通过使用此项目，同时获取HyperOS EU的功能和HyperOS 大陆版的功能。
【系统架构】包含 Xposed 模块以 Hook 系统及 HyperOS 相关包来修改系统属性，同时提供设备状态查看（如 Root、Magisk/Xposed 模块状态）和多种需 Root 权限的系统操作（如权限管理、日志处理等），支持多语言。
`,endDate:"",id:"1758463559412",secondarySubtitle:"blog.nekolin.top/2025/01/24/HyperOSEULocalization/",startDate:"2025.01-至今",subtitle:"开发维护",title:"HyperOS欧洲版本地化项目工具箱"},{id:"1757064171447",title:"个人网站",subtitle:"全栈开发",secondarySubtitle:"nekolin.top",startDate:"",endDate:"",description:`一个基于 Hexo 构建的博客网站
- Google搜索"nekolin blog"，本站排名第一
- 基于Upptime & Baidu Analytics 实现全站流量统计与监控
- 基于GitHub Actions实现自动化部署`}]},{id:"experience",title:"校园经历",iconName:"briefcase",type:"timeline",editorType:"timeline",visible:!0,order:4,data:[{id:"1",title:"上海电子信息职业技术学院校团委社会实践部",subtitle:"副部长（主持工作）",secondarySubtitle:"",startDate:"2022.09",endDate:"2023.06",description:`负责校级社会实践各项活动审核招募工作
【主要职责】
•具体负责一年一度的暑期大学生“三下乡”、“西部计划”等社会实践活动
•负责日常的社区精神文明共建活动主动联系各种社会资源，不断建立和拓展大学生社会实践基地，强化大学生社会实践工作的基地化、规范化、定期化建设。努力通过大学生社会实践活动加强社区的精神文明建设
•制定校大学生社会实践的规划和方案，并联系学校各个职能部门进行具体的落实和安排`}]},{id:"advantages",title:"专业技能",iconName:"star",type:"list",editorType:"text",visible:!0,order:5,data:{content:`后端开发：熟练掌握 Java 编程语言,熟悉 Spring Boot 框架，能够使用 MyBatis-Plus 进行数据库持久化操作。
前端开发：熟悉 HTML、CSS、JavaScript 等前端基础技术，能够进行简单的页面开发和交互设计。了解 Vue 框架，能够快速搭建前端应用架构。
数据库管理 :熟练掌握 MySQL 数据库，熟悉数据库设计原则和SQL语言，能够进行数据库建模、优化查询语句，具备数据库性能调优的基本能力。
算法与数据结构：掌握基本数据结构(如数组、链表、树、图)和算法(如排序、搜索)，具备一定的算法设计与分析能力，能够运用算法知识解决实际问题。
开发工具与版本控制：熟练使用 Intel IDEA 等开发工具,提高开发效率。掌握 Git 版本控制系统的常用操作能够进行代码管理与团队协作。会运用 Docker 容器快速地建立、测试和部署应用程序。`}}]},P=at("resume-data",Je),As=A(null,(t,s)=>{s(P,Je)}),Fs=A(null,(t,s,a)=>{const n=t(P),r=n.sections.map(i=>i.id===a.sectionId?{...i,data:a.data,...a.iconName!==void 0&&{iconName:a.iconName,icon:a.iconName}}:i);s(P,{...n,sections:r})}),Ms=A(null,(t,s,a)=>{const n=t(P),r=n.sections.map(i=>i.id===a.sectionId?{...i,...a.props}:i);s(P,{...n,sections:r})}),zs=A(null,(t,s,a)=>{const n=t(P),r=n.sections.find(o=>o.type==="basic"),i=r?[r,...a]:a;s(P,{...n,sections:i})}),Os=A(null,(t,s,a)=>{const n=t(P);s(P,{...n,sections:[...n.sections,a]})}),Bs=A(null,(t,s,a)=>{const n=t(P),r=n.sections.filter(i=>i.id!==a);s(P,{...n,sections:r})}),Ls=A(t=>s=>t(P).sections.find(n=>n.id===s)),$s=A(t=>t(P).sections.filter(a=>a.type!=="basic").sort((a,n)=>a.order-n.order)),Us=A(t=>t(P).sections.find(a=>a.type==="basic")),Vs=A(null,(t,s,a)=>{const n=t(P);s(P,{...n,pageSettings:a})}),_s=A(null,(t,s,a)=>{const n=t(P),r=n.sections.map(i=>{const o=a.find(d=>d.sectionId===i.id);return o?{...i,pageNumber:o.pageNumber}:i});s(P,{...n,sections:r})}),Hs=A(t=>s=>t(P).sections.filter(n=>n.type!=="basic").filter(n=>(n.pageNumber||1)===s).filter(n=>n.visible).sort((n,r)=>n.order-r.order)),ue=()=>{const t=O(Fs),s=O(Ms),a=O(zs),n=O(Os),r=O(Bs),i=O(Vs),o=O(_s),d=O(As),l=Y(Ls),c=Y($s),m=Y(Us),u=Y(Hs);return{updateSection:(j,y,z)=>{t({sectionId:j,data:y,iconName:z})},updateSectionIcon:(j,y)=>{s({sectionId:j,props:{iconName:y}})},updateSectionTitle:(j,y)=>{s({sectionId:j,props:{title:y}})},updateSectionEditorType:(j,y)=>{s({sectionId:j,props:{editorType:y}})},toggleSectionVisibility:j=>{const y=l(j);y&&s({sectionId:j,props:{visible:!y.visible}})},toggleMultiPageMode:(j,y=2)=>{i({enableMultiPage:j,totalPages:y})},batchSetSectionsPage:j=>{o(j)},updateSectionsOrder:a,addSection:n,deleteSection:r,getSection:l,getNonBasicSections:c,getBasicSection:m,getSectionsByPage:u,clearResume:()=>{d()}}},Js=()=>{const t=Y(P),{getNonBasicSections:s,toggleMultiPageMode:a,batchSetSectionsPage:n}=ue(),[r,i]=h.useState({}),o=t.pageSettings?.enableMultiPage||!1,d=s,l=h.useCallback(()=>{const v={};d.forEach(p=>{v[p.id]=p.pageNumber||1}),i(v)},[d]);h.useEffect(()=>{l()},[l]);const c=h.useCallback(()=>{a(!0,2),l()},[a,l]),m=h.useCallback(()=>{a(!1,1);const v=d.map(p=>({sectionId:p.id,pageNumber:1}));n(v)},[a,d,n]),u=h.useCallback((v,p)=>{i(b=>({...b,[v]:p}))},[]),x=h.useCallback(()=>{const v=Object.entries(r).map(([p,b])=>({sectionId:p,pageNumber:b}));n(v)},[r,n]),g=h.useCallback(()=>{const v={};d.forEach((p,b)=>{v[p.id]=b%2+1}),i(v)},[d]),S=h.useCallback(()=>{const v={};d.forEach(p=>{v[p.id]=1}),i(v)},[d]),N=h.useCallback(v=>Object.values(r).filter(p=>p===v).length,[r]);return{isMultiPageEnabled:o,sections:d,localPageAssignments:r,handleEnableMultiPage:c,handleDisableMultiPage:m,handleSectionPageChange:u,handleAutoAssign:g,handleResetAssignments:S,getPageSectionCount:N,applyPageAssignments:x}},Gs=ve("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=h.forwardRef(({className:t,...s},a)=>e.jsx(Ue,{ref:a,className:M(Gs(),t),...s}));T.displayName=Ue.displayName;const Ws=()=>{const[t,s]=h.useState(null),[a,n]=h.useState(""),[r,i]=h.useState(null),o=ae(ne(ie,{activationConstraint:{distance:8}})),{getNonBasicSections:d,updateSectionsOrder:l,updateSection:c,updateSectionTitle:m,updateSectionIcon:u,updateSectionEditorType:x,toggleSectionVisibility:g,deleteSection:S,addSection:N,getSection:v}=ue(),p=d,b=C=>C.editorType||"timeline",f=(C,E,D)=>{if(E===D)return C;if(E==="timeline"&&D==="list")return C.map(k=>({id:k.id,content:`${k.title}${k.subtitle?` - ${k.subtitle}`:""}${k.description?`: ${k.description}`:""}`}));if(E==="list"&&D==="timeline")return C.map(k=>({id:k.id,title:k.content.slice(0,50)+(k.content.length>50?"...":""),subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:k.content}));if(D==="text"){if(E==="timeline")return{content:C.map(k=>`${k.title}
${k.subtitle}
${k.description}`).join(`

`)};if(E==="list")return{content:C.map(k=>k.content).join(`
`)}}if(E==="text"){const k=C.content||"";if(D==="timeline")return[{id:Date.now().toString(),title:"标题",subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:k}];if(D==="list")return k.split(`
`).map((G,Ke)=>({id:(Date.now()+Ke).toString(),content:G}))}return C},j=(C,E)=>{const D=v(C);if(!D)return;const F=b(D),k=f(D.data,F,E);x(C,E),c(C,k)},y=C=>{const E=C.map((D,F)=>({...D,order:F+2}));l(E)},z=C=>{const E=p.findIndex(F=>F.id===C);if(E<=0)return;const D=[...p];[D[E-1],D[E]]=[D[E],D[E-1]],y(D)},I=C=>{const E=p.findIndex(F=>F.id===C);if(E>=p.length-1)return;const D=[...p];[D[E],D[E+1]]=[D[E+1],D[E]],y(D)},R=C=>{const{active:E,over:D}=C;if(!D||E.id===D.id)return;const F=p.findIndex(G=>G.id===E.id),k=p.findIndex(G=>G.id===D.id);if(F!==-1&&k!==-1){const G=oe(p,F,k);y(G)}},H=C=>{g(C)},L=C=>{S(C)},K=C=>{s(C.id),n(C.title)},J=()=>{t&&a.trim()&&(m(t,a.trim()),s(null),n(""))},Qe=()=>{s(null),n("")},Ye=(C,E)=>{u(C,E)},Xe=()=>{const C={id:`custom-${Date.now()}`,title:"新模块",iconName:"star",type:"timeline",editorType:"timeline",visible:!0,order:p.length+2,data:[]};N(C),K(C)},qe={sensors:o,onDragEnd:R,sortableItems:p.map(C=>C.id),strategy:re};return{managedSections:p,editingId:t,editingTitle:a,showIconSelector:r,setEditingTitle:n,setShowIconSelector:i,deleteSection:L,addCustomSection:Xe,startEditing:K,saveEditing:J,cancelEditing:Qe,updateSectionIcon:Ye,getEditorType:b,updateEditorType:j,toggleVisibility:H,moveUp:z,moveDown:I,dragConfig:qe,handleDragEnd:R}},pe=[{name:"user",icon:Te,label:"用户"},{name:"mail",icon:Re,label:"邮箱"},{name:"phone",icon:Ae,label:"电话"},{name:"map-pin",icon:lt,label:"位置"},{name:"home",icon:ct,label:"家庭"},{name:"car",icon:dt,label:"交通"},{name:"briefcase",icon:mt,label:"工作"},{name:"building",icon:ut,label:"公司"},{name:"graduation-cap",icon:xt,label:"教育"},{name:"award",icon:ht,label:"奖项"},{name:"trophy",icon:gt,label:"成就"},{name:"rocket",icon:pt,label:"创业"},{name:"code",icon:ft,label:"编程"},{name:"database",icon:bt,label:"数据库"},{name:"cloud",icon:jt,label:"云计算"},{name:"cpu",icon:vt,label:"硬件"},{name:"wifi",icon:yt,label:"网络"},{name:"shield",icon:Nt,label:"安全"},{name:"monitor",icon:St,label:"前端"},{name:"smartphone",icon:wt,label:"移动端"},{name:"settings",icon:te,label:"运维"},{name:"github",icon:Ct,label:"GitHub"},{name:"linkedin",icon:It,label:"LinkedIn"},{name:"twitter",icon:Et,label:"Twitter"},{name:"instagram",icon:Dt,label:"Instagram"},{name:"youtube",icon:kt,label:"YouTube"},{name:"facebook",icon:Pt,label:"Facebook"},{name:"message-circle",icon:Tt,label:"微信"},{name:"link",icon:Rt,label:"链接"},{name:"tv",icon:At,label:"电视"},{name:"camera",icon:Ft,label:"摄影"},{name:"music",icon:Mt,label:"音乐"},{name:"headphones",icon:zt,label:"音响"},{name:"palette",icon:Ot,label:"设计"},{name:"gamepad-2",icon:Bt,label:"游戏"},{name:"plane",icon:Lt,label:"旅行"},{name:"book",icon:$t,label:"阅读"},{name:"coffee",icon:Ut,label:"咖啡"},{name:"globe",icon:Vt,label:"网站"},{name:"calendar",icon:Fe,label:"时间"},{name:"file-text",icon:Ne,label:"文档"},{name:"shopping-bag",icon:_t,label:"购物"},{name:"credit-card",icon:Ht,label:"金融"},{name:"star",icon:Me,label:"收藏"},{name:"heart",icon:Jt,label:"喜欢"},{name:"target",icon:Gt,label:"目标"},{name:"zap",icon:Wt,label:"能量"},{name:"folder",icon:Qt,label:"文件夹"},{name:"briefcase-business",icon:Yt,label:"商务"}],Z=({value:t,onChange:s,label:a="图标"})=>{const[n,r]=h.useState(!1),i=pe.find(o=>o.name===t);return e.jsxs("div",{className:"space-y-2",children:[a&&e.jsx(T,{className:"text-sm font-medium text-gray-700",children:a}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>r(!n),className:"w-full justify-start h-10",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:"h-4 w-4"}),e.jsx("span",{children:i.label})]}):e.jsx("span",{className:"text-gray-500",children:"选择图标"})}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-6 gap-1 p-3",children:pe.map(o=>e.jsxs("button",{type:"button",onClick:()=>{s(o.name),r(!1)},className:`flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-100 transition-colors text-xs ${t===o.name?"bg-blue-50 text-blue-600":"text-gray-600"}`,title:o.label,children:[e.jsx(o.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate text-[10px] leading-tight",children:o.label})]},o.name))})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},ee=({iconName:t,className:s,onClick:a})=>{const n=pe.find(r=>r.name===t)?.icon;return n?e.jsx(n,{className:s,onClick:a}):null},B=h.forwardRef(({className:t,type:s,...a},n)=>e.jsx("input",{type:s,className:M("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...a}));B.displayName="Input";const Qs=({value:t,onValueChange:s,placeholder:a,options:n,className:r})=>e.jsxs("select",{value:t||"",onChange:i=>s?.(i.target.value),className:M("flex h-8 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-1 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",r),children:[a&&e.jsx("option",{value:"",disabled:!0,children:a}),n.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]}),Ie=[{value:"timeline",label:"时间线编辑器",description:"适合工作经历、教育背景等时序信息",icon:Fe},{value:"text",label:"文本编辑器",description:"适合自我介绍、备注等自由文本",icon:Xt}],Ys=({section:t,isEditing:s,editingTitle:a,onStartEditing:n,onSaveEditing:r,onCancelEditing:i,onTitleChange:o,onIconChange:d,onEditorTypeChange:l,onDelete:c,getEditorType:m})=>{const{attributes:u,listeners:x,setNodeRef:g,transform:S,transition:N,isDragging:v}=le({id:t.id,disabled:s}),p={transform:ce.Transform.toString(S),transition:N,opacity:v?.5:1},b=m(t),f=Ie.find(y=>y.value===b),j=y=>{l(y)};return e.jsx("div",{ref:g,style:p,className:`group border border-gray-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-all duration-200 ${v?"shadow-lg scale-105":""}`,children:e.jsxs("div",{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{...u,...x,className:`flex-shrink-0 p-1 rounded hover:bg-gray-100 transition-colors cursor-grab active:cursor-grabbing ${s?"cursor-not-allowed opacity-50":""}`,children:e.jsx($,{className:"h-4 w-4 text-gray-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{htmlFor:`title-${t.id}`,className:"text-xs text-gray-500",children:"模块标题"}),e.jsx(B,{id:`title-${t.id}`,value:a,onChange:y=>o(y.target.value),placeholder:"请输入模块标题",className:"h-8 text-sm"})]}),e.jsx("div",{className:"space-y-1",children:e.jsx(Z,{value:t.iconName,onChange:d,label:"图标"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{htmlFor:`editor-${t.id}`,className:"text-xs text-gray-500",children:"编辑器类型"}),e.jsx(Qs,{value:b,onValueChange:j,placeholder:"选择编辑器类型",options:Ie})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsxs(w,{onClick:r,size:"sm",className:"h-7 px-2 text-xs bg-blue-600 hover:bg-blue-700",children:[e.jsx(qt,{className:"h-3 w-3 mr-1"}),"保存"]}),e.jsxs(w,{onClick:i,variant:"outline",size:"sm",className:"h-7 px-2 text-xs",children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"取消"]})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f?.label," • ",t.visible?"显示中":"已隐藏",t.pageNumber&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:["第",t.pageNumber,"页"]})]})]})}),!s&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(w,{onClick:n,variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-gray-100",children:e.jsx(Kt,{className:"h-3 w-3 text-gray-600"})}),e.jsx(w,{onClick:c,variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-red-50 hover:text-red-600",children:e.jsx(q,{className:"h-3 w-3"})})]})]})})},Xs=()=>{const{managedSections:t,editingId:s,editingTitle:a,setEditingTitle:n,deleteSection:r,addCustomSection:i,startEditing:o,saveEditing:d,cancelEditing:l,updateSectionIcon:c,getEditorType:m,updateEditorType:u,dragConfig:x}=Ws();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium text-gray-700",children:["模块列表 (",t.length,")"]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"拖拽调整顺序"]})]}),e.jsx(de,{sensors:x.sensors,onDragEnd:x.onDragEnd,children:e.jsx(me,{items:x.sortableItems,strategy:x.strategy,children:e.jsx("div",{className:"space-y-3",children:t.map(g=>e.jsx(Ys,{section:g,isEditing:s===g.id,editingTitle:a,onStartEditing:()=>o(g),onSaveEditing:d,onCancelEditing:l,onTitleChange:n,onIconChange:S=>c(g.id,S),onEditorTypeChange:S=>u(g.id,S),onDelete:()=>r(g.id),getEditorType:m},g.id))})})}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"还没有自定义模块"}),e.jsx("p",{className:"text-sm",children:"点击下方按钮添加第一个模块"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"添加新模块"}),e.jsxs(w,{onClick:i,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"添加模块"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"新添加的模块将显示在模块列表的最后，你可以通过拖拽调整位置。"})]})]})},Ee=({pageNumber:t,sections:s,sectionCount:a,localPageAssignments:n})=>{const r=s.filter(i=>n[i.id]===t);return e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["第 ",t," 页 (",a," 个模块)"]}),t===1&&e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"基本信息（固定）"}),r.map(i=>e.jsxs("div",{className:"text-xs text-gray-600 py-1",children:["• ",i.title]},i.id)),a===0&&t===2&&e.jsx("div",{className:"text-xs text-gray-400 italic",children:"暂无模块"})]})},qs=({section:t,currentPage:s,onPageChange:a})=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t.title}),!t.visible&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"已隐藏"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{size:"sm",variant:s===1?"default":"outline",onClick:()=>a(t.id,1),children:"第 1 页"}),e.jsx(w,{size:"sm",variant:s===2?"default":"outline",onClick:()=>a(t.id,2),children:"第 2 页"})]})]}),Ks=({pageSettings:t})=>{const{isMultiPageEnabled:s,sections:a,localPageAssignments:n,handleEnableMultiPage:r,handleDisableMultiPage:i,handleSectionPageChange:o,handleAutoAssign:d,handleResetAssignments:l,getPageSectionCount:c}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(T,{className:"text-sm font-medium text-gray-700",children:["多页模式 ",s?"（已启用）":"（已禁用）"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s?"简历将分为两页显示，你可以自由分配模块到不同页面":"点击启用后，可以将简历分为两页"})]}),e.jsx("div",{className:"flex gap-2",children:s?e.jsx(w,{onClick:i,variant:"outline",children:"禁用多页"}):e.jsx(w,{onClick:r,className:"bg-green-600 hover:bg-green-700",children:"启用多页"})})]})}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"模块页面分配"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"自动分配"]}),e.jsxs(w,{onClick:l,size:"sm",variant:"outline",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),"重置"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ee,{pageNumber:1,sections:a,sectionCount:c(1),localPageAssignments:n}),e.jsx(Ee,{pageNumber:2,sections:a,sectionCount:c(2),localPageAssignments:n})]}),e.jsx("div",{className:"space-y-2",children:a.map(m=>e.jsx(qs,{section:m,currentPage:n[m.id]||1,onPageChange:o},m.id))})]})]})},Zs=({activeTab:t,onTabChange:s})=>{const a=[{id:"modules",label:"模块管理",icon:es},{id:"pages",label:"多页设置",icon:Ne}];return e.jsx("div",{className:"flex border-b",children:a.map(n=>{const r=n.icon;return e.jsxs(w,{onClick:()=>s(n.id),variant:"ghost",className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 rounded-none h-auto transition-colors ${t===n.id?"border-blue-500 text-blue-600 bg-transparent hover:bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(r,{className:"h-4 w-4"}),n.label]},n.id)})})},ea=({isOpen:t,onClose:s})=>{const[a,n]=h.useState("modules"),r=Js(),i=()=>{r.applyPageAssignments(),s()};return h.useEffect(()=>{r.applyPageAssignments()},[a]),e.jsx(W,{open:t,onOpenChange:i,children:e.jsxs(U,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"flex items-center gap-3 text-xl font-semibold text-gray-900",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:e.jsx(te,{className:"h-6 w-6 text-white"})}),e.jsx("span",{children:"简历设置"})]}),e.jsx(_,{children:"管理简历的模块和页面设置，拖拽调整顺序，关闭时自动保存所有更改。"})]}),e.jsx(Zs,{activeTab:a,onTabChange:n}),e.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto",children:[a==="modules"&&e.jsx(Xs,{}),a==="pages"&&e.jsx(Ks,{pageSettings:r})]})]})})};function ta({delayDuration:t=0,...s}){return e.jsx(hs,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function fe({...t}){return e.jsx(ta,{children:e.jsx(cs,{"data-slot":"tooltip",...t})})}function be({...t}){return e.jsx(ds,{"data-slot":"tooltip-trigger",...t})}function je({className:t,sideOffset:s=0,children:a,...n}){return e.jsx(ms,{children:e.jsxs(us,{"data-slot":"tooltip-content",sideOffset:s,className:M("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[a,e.jsx(xs,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const sa=()=>{const[t,s]=Pe(P);return{handleExportJson:()=>{const r=JSON.parse(JSON.stringify(t)),i=r.sections.find(m=>m.id==="basic-info");i&&(i.data.avatar="");const o=JSON.stringify(r),d=new Blob([o],{type:"application/json"}),l=URL.createObjectURL(d),c=document.createElement("a");c.href=l,c.download="resume.json",c.click(),URL.revokeObjectURL(l),c.remove()},handleImportJson:r=>{const i=new FileReader;i.onload=o=>{const d=JSON.parse(o.target?.result);s(d)},i.readAsText(r)}}},aa=({onPreview:t,onClear:s,onManageResume:a})=>{const{handleImportJson:n}=sa();return e.jsxs(e.Fragment,{children:[e.jsxs(w,{onClick:a,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"简历设置"})]}),e.jsxs(w,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"预览导出"})]}),e.jsx("input",{type:"file",id:"import-json-input",accept:"application/json",onChange:r=>{n(r.target?.files?.[0])},className:"hidden"}),e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(w,{variant:"outline",onClick:()=>{const r=document.getElementById("import-json-input");r&&r.click()},children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"导入JSON"})]})}),e.jsx(je,{children:e.jsx("p",{children:"仅支持本工具导出的JSON文件，导入后会覆盖当前简历"})})]}),e.jsxs(w,{onClick:s,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"清空"})]}),e.jsx("div",{className:"hidden lg:block text-xs text-gray-500",children:"💡 点击模块右上角编辑按钮修改内容"})]})},na=()=>e.jsx("footer",{className:"mt-12 py-6 text-center text-gray-500 text-xs",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx("p",{children:"✨ 让每一份简历都闪闪发光 ✨"}),e.jsx("p",{className:"mt-1 text-gray-400",children:"数据自动保存到本地浏览器，刷新页面不会丢失"})]})}),ia=({children:t})=>e.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ne,{className:"h-5 w-5 text-white"})}),e.jsx(as,{className:"absolute -top-0.5 -right-0.5 h-3 w-3 text-yellow-400"})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Resumaker"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-full bg-gray-50 hover:bg-gray-100 transition-all duration-200 cursor-pointer border border-gray-200 hover:border-gray-300 hover:shadow-md",children:e.jsx(ee,{iconName:"github",className:"h-4 w-4 text-gray-600 hover:text-gray-800 transition-colors duration-200",onClick:()=>{window.open("https://github.com/WindsorWu/ResumeMaker","_blank")}})})}),e.jsx(je,{children:e.jsx("p",{children:"GitHub 源码，给个⭐️~~"})})]}),e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-full bg-gradient-to-br from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 transition-all duration-200 cursor-pointer border border-blue-200 hover:border-blue-300 hover:shadow-md",children:e.jsx(ee,{iconName:"globe",className:"h-4 w-4 text-blue-600 hover:text-blue-700 transition-colors duration-200",onClick:()=>{window.open("https://whitemeta.cn","_blank")}})})}),e.jsx(je,{children:e.jsx("p",{children:"个人网站，欢迎访问"})})]})]}),t]})]})})}),ra=(t,s)=>{const a=h.useRef(t);h.useEffect(()=>{a.current=t});const n=h.useMemo(()=>st((...r)=>a.current(...r),s),[s]);return h.useEffect(()=>()=>{n.cancel()},[n]),n},xe=({isOpen:t,initialData:s,onSave:a,onClose:n,debounceDelay:r=500,isEqual:i=(o,d)=>JSON.stringify(o)===JSON.stringify(d)})=>{const[o,d]=h.useState(s),[l,c]=h.useState(!1),m=h.useRef(!1),u=h.useRef(o),x=h.useRef(s);h.useEffect(()=>{u.current=o},[o]);const g=ra(N=>{c(!0);try{a(N),x.current=N}finally{setTimeout(()=>c(!1),300)}},r);h.useEffect(()=>{m.current&&t&&!i(o,x.current)&&g(o)},[o,t,g,i]),h.useEffect(()=>{t?m.current||(d(s),x.current=s,c(!1),m.current=!0):(m.current=!1,c(!1))},[t,s]);const S=h.useCallback(()=>{if(m.current){const N=u.current;if(!i(N,x.current)){try{g.flush()}catch(p){console.warn("Debounce flush failed, saving directly:",p)}a(N)}}n()},[g,a,n,i]);return{data:o,setData:d,isSaving:l,handleClose:S,saveStatusText:l?"保存中...":"自动保存"}},oa=(t,s)=>{const[a,n]=h.useState(t),[r,i]=h.useState(""),[o,d]=h.useState(!1);return{previewUrl:a,originalImageUrl:r,showCropper:o,handleFileSelect:x=>{const g=new FileReader;return g.onload=S=>{const N=S.target?.result;i(N),d(!0)},g.readAsDataURL(x),!0},handleCropSave:x=>{n(x),s?.(x),d(!1)},handleCropExisting:()=>{a&&(i(a),d(!0))},handleRemove:()=>{n(void 0),s?.("")},setShowCropper:d}},la={sm:"w-16 h-20 print:w-14 print:h-18",md:"w-24 h-32 print:w-20 print:h-28",lg:"w-32 h-40 print:w-28 print:h-36"},Ge=({src:t,alt:s="头像",size:a="md",className:n=""})=>e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:ke(`${la[a]} rounded-lg overflow-hidden ${n}`,"bg-gray-200 border border-gray-300"),children:e.jsx("img",{src:t,alt:s,className:"w-full h-full object-cover"})})}),ca=({onFileSelect:t,accept:s="image/*",children:a,className:n,variant:r="outline",size:i="sm"})=>{const o=h.useRef(null),d=()=>{o.current?.click()},l=c=>{const m=c.target.files?.[0];m&&(t(m),o.current&&(o.current.value=""))};return e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:d,size:i,variant:r,className:n,children:a}),e.jsx("input",{ref:o,type:"file",accept:s,onChange:l,className:"hidden"})]})},da=()=>{const t=O(Ss),s=O(Ve),a=h.useCallback((l,c)=>{const m=t({message:l,type:"error",duration:c??5e3});c!==0&&setTimeout(()=>{s(m)},c??5e3)},[t,s]),n=h.useCallback((l,c)=>{const m=t({message:l,type:"warning",duration:c??4e3});c!==0&&setTimeout(()=>{s(m)},c??4e3)},[t,s]),r=h.useCallback((l,c)=>{const m=t({message:l,type:"info",duration:c??3e3});c!==0&&setTimeout(()=>{s(m)},c??3e3)},[t,s]),i=h.useCallback((l,c)=>{const m=t({message:l,type:"success",duration:c??3e3});c!==0&&setTimeout(()=>{s(m)},c??3e3)},[t,s]),o=h.useCallback(l=>{const c=t(l);return l.duration&&l.duration>0&&setTimeout(()=>{s(c)},l.duration),c},[t,s]),d=h.useCallback((l,c="操作失败，请重试")=>{const m=l instanceof Error?l.message:c;a(m),console.error("Async operation error:",l)},[a]);return{showError:a,showWarning:n,showInfo:r,showSuccess:i,addMessage:o,handleAsyncError:d}};function ma(t){return t.toDataURL("image/jpeg",.9)}async function ua(t,s){const a=document.createElement("canvas"),n=a.getContext("2d"),r=t.naturalWidth/t.width,i=t.naturalHeight/t.height;return a.width=s.width*r,a.height=s.height*i,n.drawImage(t,s.x*r,s.y*i,s.width*r,s.height*i,0,0,s.width*r,s.height*i),ma(a)}const xa=(t,s)=>{const[a,n]=h.useState(),[r,i]=h.useState(),o=h.useRef(null),{showError:d}=da(),l=h.useCallback(g=>{const{width:S,height:N}=g.currentTarget,v=gs(ps({unit:"%",width:80},3/4,S,N),S,N);n(v),i(v)},[]);return{crop:a,completedCrop:r,imgRef:o,onImageLoad:l,onCropChange:(g,S)=>{n(S)},onCropComplete:g=>{i(g)},handleSave:async()=>{if(r&&o.current)try{const g=await ua(o.current,r);t(g),s()}catch(g){console.error("Failed to crop image:",g),d("请上传头像后裁剪")}},handleCancel:()=>{s()}}},ha=({isOpen:t,onClose:s,imageSrc:a,onCropComplete:n})=>{const{crop:r,completedCrop:i,imgRef:o,onImageLoad:d,onCropChange:l,onCropComplete:c,handleSave:m,handleCancel:u}=xa(n,s);return e.jsx(W,{open:t,onOpenChange:s,children:e.jsxs(U,{className:"max-w-2xl",children:[e.jsxs(Q,{children:[e.jsx(V,{children:"裁剪头像"}),e.jsx(_,{children:"拖拽调整裁剪区域，点击保存完成头像设置。"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(fs,{crop:r,onChange:l,onComplete:c,aspect:3/4,children:e.jsx("img",{ref:o,src:a,alt:"裁剪头像",onLoad:d,className:"max-h-96"})})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(w,{variant:"outline",onClick:u,children:"取消"}),e.jsx(w,{onClick:m,disabled:!i,children:"保存"})]})]})]})})},ga=({currentAvatar:t,onAvatarChange:s})=>{const{previewUrl:a,originalImageUrl:n,showCropper:r,handleFileSelect:i,handleCropSave:o,handleCropExisting:d,handleRemove:l,setShowCropper:c}=oa(t,s);return e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(Ge,{src:a,alt:"头像预览",size:"lg"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ca,{onFileSelect:m=>i(m),children:a?"更换头像":"选择头像"}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(ns,{className:"h-3 w-3 mr-1"}),"裁剪"]}),e.jsx(w,{onClick:l,size:"sm",variant:"outline",children:"移除头像"})]})]}),r&&n&&e.jsx(ha,{isOpen:r,onClose:()=>c(!1),imageSrc:n,onCropComplete:o})]})},pa=({field:t,onUpdate:s,onDelete:a})=>{const[n,r]=h.useState(!1),[i,o]=h.useState(t.label),[d,l]=h.useState(t.value),[c,m]=h.useState(t.iconName),{attributes:u,listeners:x,setNodeRef:g,transform:S,transition:N,isDragging:v}=le({id:t.id,disabled:n}),p={transform:ce.Transform.toString(S),transition:N,opacity:v?.5:1},b=()=>{s(t.id,{label:i,value:d,iconName:c}),r(!1)},f=()=>{o(t.label),l(t.value),m(t.iconName),r(!1)};return n?e.jsxs("div",{ref:g,style:p,className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:`label-${t.id}`,children:"字段名称"}),e.jsx(B,{id:`label-${t.id}`,value:i,onChange:j=>o(j.target.value),placeholder:"如：个人网站、GitHub等"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:`value-${t.id}`,children:"字段值"}),e.jsx(B,{id:`value-${t.id}`,value:d,onChange:j=>l(j.target.value),placeholder:"如：https://example.com"})]})]}),e.jsx("div",{children:e.jsx(Z,{value:c,onChange:m,label:"图标"})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:f,children:"取消"}),e.jsx(w,{size:"sm",onClick:b,children:"保存"})]})]}):e.jsxs("div",{ref:g,style:p,className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{...u,...x,className:"cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.label}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.value})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>r(!0),children:"编辑"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>a(t.id),children:e.jsx(q,{className:"h-4 w-4 text-red-500"})})]})]})},fa=({id:t,label:s,type:a="text",value:n,placeholder:r,onChange:i})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:t,children:s}),e.jsx(B,{id:t,type:a,value:n,onChange:o=>i(o.target.value),placeholder:r})]}),ba=({isOpen:t,onClose:s,initialData:a,onSave:n})=>{const r=ae(ne(ie,{activationConstraint:{distance:8}})),{data:i,setData:o,handleClose:d,saveStatusText:l}=xe({isOpen:t,initialData:{...a,customFields:a.customFields||[]},onSave:n,onClose:s,debounceDelay:300}),[c,m]=h.useState(null),u=(b,f)=>{o(j=>({...j,[b]:f}))},x=b=>{o(f=>({...f,avatar:b}))},g=()=>{const b={id:Date.now().toString(),label:"",value:"",icon:"star",iconName:"star"};o(f=>({...f,customFields:[...f.customFields||[],b]})),m(b.id)},S=(b,f)=>{o(j=>({...j,customFields:j.customFields?.map(y=>y.id===b?{...y,...f}:y)||[]}))},N=b=>{o(f=>({...f,customFields:f.customFields?.filter(j=>j.id!==b)||[]})),c===b&&m(null)},v=b=>{const{active:f,over:j}=b;if(!j||f.id===j.id||!i.customFields)return;const y=i.customFields.findIndex(I=>I.id===f.id),z=i.customFields.findIndex(I=>I.id===j.id);if(y!==-1&&z!==-1){const I=oe(i.customFields,y,z);o(R=>({...R,customFields:I}))}},p=[{id:"name",label:"姓名",type:"text",placeholder:"请输入您的姓名"},{id:"gender",label:"性别",type:"text",placeholder:"请输入您的性别"},{id:"age",label:"年龄",type:"text",placeholder:"请输入您的年龄"},{id:"phone",label:"电话",type:"tel",placeholder:"+86 138 0013 8000"},{id:"email",label:"邮箱",type:"email",placeholder:"your.email@example.com"}];return e.jsx(W,{open:t,onOpenChange:d,children:e.jsxs(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(V,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsx("span",{children:"编辑基本信息"}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:l})]}),e.jsx(_,{children:"编辑个人基本信息，包括姓名、联系方式等，所有更改将自动保存。"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"头像"}),e.jsx(ga,{currentAvatar:i.avatar,onAvatarChange:x})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(b=>e.jsx(fa,{id:b.id,label:b.label,type:b.type,value:i[b.id]||"",placeholder:b.placeholder,onChange:f=>u(b.id,f)},b.id))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"自定义字段"}),e.jsxs(w,{onClick:g,size:"sm",variant:"outline",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"添加字段"]})]}),i.customFields&&i.customFields.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"拖拽调整字段顺序"]}),e.jsx(de,{sensors:r,onDragEnd:v,children:e.jsx(me,{items:i.customFields.map(b=>b.id),strategy:re,children:e.jsx("div",{className:"space-y-3",children:i.customFields.map(b=>e.jsx(pa,{field:b,onUpdate:(f,j)=>S(f,j),onDelete:f=>N(f)},b.id))})})})]})]})]})]})})},ja=(t,s,a,n,r)=>{const i=ae(ne(ie,{activationConstraint:{distance:8}})),{data:o,setData:d,handleClose:l,saveStatusText:c}=xe({isOpen:t,initialData:{items:s,selectedIcon:a},onSave:f=>n(f.items,f.selectedIcon),onClose:r,debounceDelay:300}),{items:m,selectedIcon:u}=o,x=f=>{d({...o,items:f})},g=f=>{d({...o,selectedIcon:f})},S=()=>{const f={id:Date.now().toString(),content:""};x([...m,f])},N=f=>{x(m.filter(j=>j.id!==f))},v=(f,j)=>{x(m.map(y=>y.id===f?{...y,content:j}:y))},p=f=>{const{active:j,over:y}=f;if(!y||j.id===y.id)return;const z=m.findIndex(R=>R.id===j.id),I=m.findIndex(R=>R.id===y.id);if(z!==-1&&I!==-1){const R=oe(m,z,I);x(R)}},b=(f,j)=>{const y=[...m],[z]=y.splice(f,1);y.splice(j,0,z),x(y)};return{items:m,selectedIcon:u,saveStatusText:c,dragConfig:{sensors:i,onDragEnd:p,sortableItems:m.map(f=>f.id),strategy:re},addItem:S,removeItem:N,updateItem:v,moveItem:b,setSelectedIcon:g,handleClose:l}},he=h.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:M("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));he.displayName="Textarea";const va=({item:t,index:s,onUpdate:a,onRemove:n})=>{const{attributes:r,listeners:i,setNodeRef:o,transform:d,transition:l,isDragging:c}=le({id:t.id}),m={transform:ce.Transform.toString(d),transition:l,opacity:c?.5:1};return e.jsxs("div",{ref:o,style:m,className:"flex items-start space-x-2 group",children:[e.jsxs("div",{className:"flex flex-col items-center mt-2",children:[e.jsx("div",{...r,...i,className:"cursor-move",children:e.jsx($,{className:"h-4 w-4 text-gray-400"})}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:s+1})]}),e.jsx("div",{className:"flex-1",children:e.jsx(he,{value:t.content,onChange:u=>a(t.id,u.target.value),placeholder:`请输入第 ${s+1} 项内容...`,className:"min-h-[80px] resize-none",rows:3})}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"mt-2 text-red-600 hover:text-red-700 hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(q,{className:"h-4 w-4"})})]})},ya=({isOpen:t,onClose:s,initialData:a,onSave:n,title:r,currentIcon:i})=>{const{items:o,selectedIcon:d,saveStatusText:l,dragConfig:c,addItem:m,removeItem:u,updateItem:x,setSelectedIcon:g,handleClose:S}=ja(t,a,i,n,s);return e.jsx(W,{open:t,onOpenChange:S,children:e.jsxs(U,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsxs("span",{children:["编辑",r]}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:l})]}),e.jsxs(_,{children:["在此处编辑您的",r,"信息，所有更改将自动保存。"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Z,{value:d,onChange:g,label:"图标"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"列表内容"}),e.jsxs(w,{onClick:m,size:"sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"添加项目"]})]}),o.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"拖拽调整项目顺序"]}),e.jsx(de,{sensors:c.sensors,onDragEnd:c.onDragEnd,children:e.jsx(me,{items:c.sortableItems,strategy:c.strategy,children:e.jsx("div",{className:"space-y-3",children:o.map((N,v)=>e.jsx(va,{item:N,index:v,onUpdate:x,onRemove:u},N.id))})})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:'暂无内容，点击"添加项目"开始创建'})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"💡 使用提示"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"• 适用于个人优势、技能特长等列表形式的内容"}),e.jsx("li",{children:"• 每一项内容会在简历中自动编号显示"}),e.jsx("li",{children:"• 可以拖拽调整项目顺序"}),e.jsx("li",{children:"• 支持多行文本，详细描述您的优势"})]})]})]})]})})},Na=(t,s,a,n,r)=>{const{data:i,setData:o,handleClose:d,saveStatusText:l}=xe({isOpen:t,initialData:{content:s.content,selectedIcon:a,iconEnabled:!!a&&a!==""},onSave:p=>n({content:p.content},p.iconEnabled?p.selectedIcon:""),onClose:r,debounceDelay:300}),{content:c,selectedIcon:m,iconEnabled:u}=i,x=p=>{o({...i,content:p})},g=p=>{o({...i,selectedIcon:p})},S=p=>{o({...i,iconEnabled:p})},{wordCount:N,lineCount:v}=h.useMemo(()=>{const p=c.length,b=c.split(`
`).length;return{wordCount:p,lineCount:b}},[c]);return{content:c,selectedIcon:m,iconEnabled:u,wordCount:N,lineCount:v,saveStatusText:l,setContent:x,setSelectedIcon:g,setIconEnabled:S,handleClose:d}},Sa=({isOpen:t,onClose:s,title:a,initialData:n,onSave:r,selectedIcon:i})=>{const{content:o,selectedIcon:d,iconEnabled:l,saveStatusText:c,wordCount:m,lineCount:u,setContent:x,setSelectedIcon:g,setIconEnabled:S,handleClose:N}=Na(t,n,i,r,s);return e.jsx(W,{open:t,onOpenChange:N,children:e.jsxs(U,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"flex items-center",children:["编辑 ",a,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:c})]}),e.jsxs(_,{children:["在此处编辑您的",a,"信息，所有更改将自动保存。"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"icon-toggle",checked:l,onChange:v=>S(v.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("label",{htmlFor:"icon-toggle",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"显示模块图标"})]}),l&&e.jsx("div",{className:"pl-6 border-l-2 border-blue-100",children:e.jsx(Z,{value:d,onChange:g,label:"图标"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"内容"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m," 字符 · ",u," 行"]})]}),e.jsx(he,{value:o,onChange:v=>x(v.target.value),placeholder:"请输入内容...",className:"min-h-[200px] resize-y"})]})]})]})})},wa=(t,s,a,n,r)=>{const[i,o]=h.useState(!1),d=ae(ne(ie,{activationConstraint:{distance:8}})),{data:l,setData:c,handleClose:m,saveStatusText:u}=xe({isOpen:t,initialData:{items:s,selectedIcon:a,iconEnabled:!!a&&a!==""},onSave:I=>n(I.items,I.iconEnabled?I.selectedIcon:""),onClose:r,debounceDelay:500}),{items:x,selectedIcon:g,iconEnabled:S}=l,N=I=>{c({...l,items:I})},v=I=>{c({...l,selectedIcon:I})},p=I=>{c({...l,iconEnabled:I})},b=()=>{const I={id:Date.now().toString(),title:"",subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:""};N([...x,I])},f=I=>{N(x.filter(R=>R.id!==I))},j=(I,R,H)=>{N(x.map(L=>L.id===I?{...L,[R]:H}:L))},y=I=>{const{active:R,over:H}=I;if(!H||R.id===H.id)return;const L=x.findIndex(J=>J.id===R.id),K=x.findIndex(J=>J.id===H.id);if(L!==-1&&K!==-1){const J=oe(x,L,K);N(J)}},z=()=>{o(!i)};return{items:x,selectedIcon:g,iconEnabled:S,isIconSelectorOpen:i,saveStatusText:u,dragConfig:{sensors:d,onDragEnd:y,sortableItems:x.map(I=>I.id),strategy:re},addItem:b,removeItem:f,updateItem:j,setSelectedIcon:v,setIconEnabled:p,toggleIconSelector:z,handleClose:m}},Ca=({item:t,index:s,onUpdate:a,onRemove:n})=>{const{attributes:r,listeners:i,setNodeRef:o,transform:d,transition:l,isDragging:c}=le({id:t.id}),m={transform:ce.Transform.toString(d),transition:l,opacity:c?.5:1};return e.jsxs("div",{ref:o,style:m,className:"border rounded-lg p-4 space-y-4 bg-white shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{...r,...i,className:"cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("h4",{className:"font-medium text-gray-800",children:["第 ",s+1," 项"]})]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"标题"}),e.jsx(B,{value:t.title,onChange:u=>a(t.id,"title",u.target.value),placeholder:"例：项目名称、公司名称",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"副标题"}),e.jsx(B,{value:t.subtitle||"",onChange:u=>a(t.id,"subtitle",u.target.value),placeholder:"例：职位、专业",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"开始时间"}),e.jsx(B,{value:t.startDate||"",onChange:u=>a(t.id,"startDate",u.target.value),placeholder:"例：2020年9月",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"结束时间"}),e.jsx(B,{value:t.endDate||"",onChange:u=>a(t.id,"endDate",u.target.value),placeholder:"例：2024年6月",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"次要副标题"}),e.jsx(B,{value:t.secondarySubtitle||"",onChange:u=>a(t.id,"secondarySubtitle",u.target.value),placeholder:"",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"详细描述"}),e.jsx(he,{value:t.description,onChange:u=>a(t.id,"description",u.target.value),placeholder:"详细描述工作内容、学习经历或项目经验...",rows:4,className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]})]})},Ia=({isOpen:t,onClose:s,initialData:a,onSave:n,title:r,currentIcon:i="briefcase"})=>{const{items:o,selectedIcon:d,saveStatusText:l,dragConfig:c,addItem:m,removeItem:u,updateItem:x,setSelectedIcon:g,handleClose:S}=wa(t,a,i,n,s);return e.jsx(W,{open:t,onOpenChange:S,children:e.jsxs(U,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsxs("span",{children:["编辑",r]}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:l})]}),e.jsxs(_,{children:["在此处编辑您的",r,"信息，所有更改将自动保存。"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Z,{value:d,onChange:g,label:"图标"}),o.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"拖拽调整项目顺序"]}),e.jsx(de,{sensors:c.sensors,onDragEnd:c.onDragEnd,children:e.jsx(me,{items:c.sortableItems,strategy:c.strategy,children:e.jsx("div",{className:"space-y-4",children:o.map((N,v)=>e.jsx(Ca,{item:N,index:v,onUpdate:x,onRemove:u},N.id))})})})]}),e.jsxs(w,{onClick:m,variant:"outline",className:"w-full border-dashed border-2 hover:bg-blue-50",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"添加一项"]})]})]})})},We=t=>{const{updateSection:s}=ue();return{handleTimelineSave:(o,d)=>{s(t,o,d)},handleListSave:(o,d)=>{s(t,o,d)},handleTextSave:(o,d)=>{s(t,o,d)},handleBasicInfoSave:o=>{s(t,o)}}},Ea=t=>{const[s,a]=h.useState(!1),{handleBasicInfoSave:n}=We(t);return{isEditing:s,startEditing:()=>{a(!0)},closeEditing:()=>{a(!1)},handleSave:m=>{n(m)},formatGenderAge:(m,u)=>m&&u?`${m} | ${u}岁`:m||(u?`${u}岁`:""),formatCustomFields:m=>!m||m.length===0?"":m.map(u=>e.jsxs("span",{className:"flex items-center gap-1",children:[u.iconName&&e.jsx(ee,{iconName:u.iconName,className:"w-4 h-4"}),u.label," ",u.value]},u.id)),hasValue:m=>m&&m.trim()!==""}},ge=({icon:t,children:s,className:a=""})=>e.jsxs("div",{className:`flex items-center space-x-1 ${a}`,children:[e.jsx(t,{className:"h-4 w-4 print:h-3 print:w-3"}),e.jsx("span",{children:s})]}),Da=({section:t,isEditable:s})=>{const a=t.data,{isEditing:n,startEditing:r,closeEditing:i,handleSave:o,formatGenderAge:d,formatCustomFields:l,hasValue:c}=Ea(t.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[s&&e.jsx(w,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:r,children:e.jsx(ze,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-6 flex flex-col items-center px-[3rem]",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 print:mb-2",children:a.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600 print:gap-x-4",children:[(a.gender||a.age)&&e.jsx(ge,{icon:Te,children:d(a.gender,a.age)}),c(a.phone)&&e.jsx(ge,{icon:Ae,children:a.phone}),c(a.email)&&e.jsx(ge,{icon:Re,children:a.email})]}),a.customFields&&a.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600 mt-2 print:mt-1",children:l(a.customFields)})]}),e.jsx("div",{className:"shrink-0 hidden md:block print:block",children:e.jsx(Ge,{src:a.avatar,alt:a.name||"头像",size:"md"})})]})]}),n&&e.jsx(ba,{isOpen:!0,onClose:i,initialData:a,onSave:o})]})},ka=({data:t})=>e.jsx("div",{className:"space-y-3 print:space-y-2",children:t.map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600 mt-0.5 shrink-0",children:[a+1,"."]}),e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e.jsx("pre",{className:"text-wrap",children:s.content})})]},s.id))}),Pa=({data:t})=>e.jsx("div",{className:"space-y-4 print:space-y-3",children:t.map(s=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 print:mb-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1 print:mb-0.5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 print:text-sm whitespace-pre",children:s.title}),e.jsx("span",{className:"text-sm text-gray-600 whitespace-pre",children:s.subtitle})]}),s.secondarySubtitle&&e.jsx("div",{className:"text-sm text-gray-700 font-medium whitespace-pre",children:s.secondarySubtitle})]}),(s.startDate||s.endDate)&&e.jsxs("div",{className:"text-sm text-gray-600 ml-4 shrink-0 whitespace-pre",children:[s.startDate," ",s.startDate&&s.endDate&&"-"," ",s.endDate]})]}),s.description&&e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap pl-0 mt-2 print:mt-1",children:s.description})]},s.id))}),Ta=({data:t})=>e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.content}),Ra=t=>{const[s,a]=h.useState(!1),{handleTimelineSave:n,handleListSave:r,handleTextSave:i}=We(t.id),o=()=>t.editorType||"timeline",d=()=>{a(!0)},l=()=>{a(!1)},c=(u,x)=>{const g=o();g==="timeline"?n(u,x):g==="list"?r(u,x):i(u,x)},m=()=>{const u=o(),x={isOpen:s,onClose:l,onSave:c,title:t.title,currentIcon:t.iconName||"briefcase"};return u==="timeline"?{...x,initialData:t.data}:u==="list"?{...x,initialData:t.data}:{...x,initialData:t.data}};return{isEditing:s,editorType:o(),startEditing:d,closeEditing:l,handleSave:c,getEditorProps:m}},Aa=({section:t,isEditable:s})=>{const{isEditing:a,editorType:n,startEditing:r,getEditorProps:i}=Ra(t),o=()=>n==="list"?e.jsx(ka,{data:t.data}):n==="text"?e.jsx(Ta,{data:t.data}):e.jsx(Pa,{data:t.data}),d=()=>{if(!a)return null;const l=i();switch(n){case"text":return e.jsx(Sa,{...l,initialData:l.initialData,selectedIcon:t.iconName||"briefcase",iconEnabled:!0});case"list":return e.jsx(ya,{...l,initialData:l.initialData});case"timeline":default:return e.jsx(Ia,{...l,initialData:l.initialData})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[s&&e.jsx(w,{variant:"ghost",size:"icon",className:"absolute top-[.5rem] right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-10",onClick:r,children:e.jsx(ze,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"mb-6 print:mb-6",children:[e.jsxs("div",{className:"flex items-center pb-[.5rem] border-b-gray-400 border-b-[1px]",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.title}),t.iconName&&e.jsx("div",{className:"p-2",children:e.jsx(ee,{iconName:t.iconName,className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-[.5rem]",children:o()})]})]}),d()]})},De=({resume:t,isEditable:s,pageNumber:a=1})=>{const n=()=>t.sections.find(l=>l.type==="basic"),r=()=>t.sections.filter(l=>l.type==="timeline"||l.type==="list"||l.type==="text"),i=n(),o=r().filter(l=>l.visible).filter(l=>t.pageSettings?.enableMultiPage?(l.pageNumber||1)===a:!0).sort((l,c)=>l.order-c.order),d=a===1;return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-lg print:shadow-none print:max-w-none",children:[d&&i&&e.jsx(Da,{section:i,isEditable:s}),o.length>0&&e.jsx("div",{className:`px-8 pb-8 print:px-6 print:pb-6 ${a!==1?"pt-8":""}`,children:e.jsx("div",{className:"space-y-6 print:space-y-4",children:o.map(l=>e.jsx(Aa,{section:l,isEditable:s},l.id))})})]})},Fa=({resume:t,isEditable:s=!1,className:a=""})=>{if(!t.pageSettings?.enableMultiPage||t.pageSettings.totalPages<=1)return e.jsx("div",{className:`print-container ${a}`,children:e.jsx(De,{resume:t,isEditable:s})});const n=t.pageSettings.totalPages;return e.jsx("div",{className:`print-container ${a}`,children:e.jsx("div",{className:"space-y-8 print:space-y-0",children:Array.from({length:n},(r,i)=>{const o=i+1;return e.jsx("div",{className:"print:page-break-after-always print:page-break-inside-avoid",children:e.jsx(De,{resume:t,isEditable:s,pageNumber:o})},o)})})})},Ma=()=>{const t=Y(P),{clearResume:s}=ue(),[a,n]=h.useState(!1),[r,i]=h.useState(!1),o=()=>{window.open("./preview","_blank")},d=()=>{s(),n(!1)},l=()=>{i(!0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[e.jsx(ia,{children:e.jsx(aa,{onPreview:o,onClear:()=>n(!0),onManageResume:l})}),e.jsx("main",{className:"max-w-6xl mx-auto p-4",children:e.jsx(Fa,{resume:t,isEditable:!0,className:"min-h-screen"})}),e.jsx(Rs,{isOpen:a,onClose:()=>n(!1),onConfirm:d}),e.jsx(ea,{isOpen:r,onClose:()=>i(!1)}),e.jsx(na,{})]})},za=()=>e.jsx(Ma,{}),Oa=Ze.lazy(()=>Ns(()=>import("./PreviewPage-B3szhkJr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(t=>({default:t.PreviewPage})));function Ba(){return e.jsx(nt,{children:e.jsx(ks,{children:e.jsx(bs,{children:e.jsxs(js,{children:[e.jsx(we,{path:"/",element:e.jsx(za,{})}),e.jsx(we,{path:"/preview",element:e.jsx(h.Suspense,{fallback:null,children:e.jsx(Oa,{})})})]})})})})}et.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(Ba,{})}));export{w as B,Fa as R,fe as T,be as a,je as b,M as c,P as r,sa as u};
