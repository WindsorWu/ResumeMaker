const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AvatarCropper-CkfeBS-n.js","assets/vendor-BJAOCLFF.js","assets/utils-uvPUNtyq.js","assets/state-BErW7EvM.js","assets/image-crop-DlUlnxqA.js","assets/image-crop-OEN34m2J.css","assets/lucide-react-rgKbjvdd.js","assets/ui-vendor-Brtqijad.js","assets/dnd-kit-CF5ZvFCr.js","assets/router-Lx8uxIVW.js","assets/PreviewPage-DP4BcZU1.js"])))=>i.map(i=>d[i]);
import{j as e,r as g,R as ke,m as et}from"./vendor-BJAOCLFF.js";import{t as tt,c as Pe,a as ve,d as st}from"./utils-uvPUNtyq.js";import{a as A,u as Te,b as B,c as at,d as W,P as nt}from"./state-BErW7EvM.js";import{X as ye,I as Se,C as it,T as rt,a as lt,b as q,U as Re,M as Ae,P as Fe,c as ot,H as ct,d as dt,B as mt,e as ut,G as xt,A as gt,f as ht,R as pt,g as ft,D as bt,h as jt,i as vt,W as yt,S as Nt,j as St,k as wt,l as te,m as Ct,L as It,n as Dt,o as Et,Y as kt,F as Pt,p as Tt,q as Rt,r as At,s as Ft,t as zt,u as Mt,v as Ot,w as Bt,x as $t,y as Lt,z as _t,E as Ut,J as ze,K as Ne,N as Vt,O as Jt,Q as Me,V as Gt,Z as Ht,_ as Wt,$ as Yt,a0 as qt,a1 as Kt,a2 as L,a3 as Qt,a4 as Zt,a5 as se,a6 as Xt,a7 as es,a8 as ts,a9 as ss,aa as as,ab as ns,ac as Oe}from"./lucide-react-rgKbjvdd.js";import{S as is,O as Be,P as rs,C as $e,a as ls,T as Le,D as _e,R as os,b as Ue,c as cs,d as ds,e as ms,f as us,A as xs,g as gs}from"./ui-vendor-Brtqijad.js";import{u as ae,a as ne,P as ie,v as re,b as le,c as oe,C as ce,D as de,S as me}from"./dnd-kit-CF5ZvFCr.js";import{H as hs,R as ps,a as we}from"./router-Lx8uxIVW.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const fs="modulepreload",bs=function(t){return"/ResumeMaker/"+t},Ce={},Ve=function(a,s,n){let r=Promise.resolve();if(s&&s.length>0){let c=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");r=c(s.map(d=>{if(d=bs(d),d in Ce)return;Ce[d]=!0;const m=d.endsWith(".css"),u=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":fs,m||(x.as="script"),x.crossOrigin="",x.href=d,o&&x.setAttribute("nonce",o),document.head.appendChild(x),m)return new Promise((j,C)=>{x.addEventListener("load",j),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return r.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return a().catch(i)})};function z(...t){return tt(Pe(t))}const Y=A([]),$a=A(null,(t,a,s)=>{const n=t(Y),r={...s,id:Date.now().toString()+Math.random().toString(36).substr(2,9)};return a(Y,[...n,r]),r.id}),js=A(null,(t,a,s)=>{const n=t(Y);a(Y,n.filter(r=>r.id!==s))});A(null,(t,a)=>{a(Y,[])});const vs=ve("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ys({className:t,variant:a,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:z(vs({variant:a}),t),...s})}function Ns({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:z("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}const Ss=t=>{switch(t){case"error":return{icon:lt,variant:"destructive",className:"border-red-200 bg-red-50 text-red-800"};case"warning":return{icon:rt,variant:"default",className:"border-yellow-200 bg-yellow-50 text-yellow-800"};case"success":return{icon:it,variant:"default",className:"border-green-200 bg-green-50 text-green-800"};case"info":return{icon:Se,variant:"default",className:"border-blue-200 bg-blue-50 text-blue-800"};default:return{icon:Se,variant:"default",className:"border-gray-200 bg-gray-50 text-gray-800"}}},ws=({message:t})=>{const a=B(js),s=Ss(t.type),n=s.icon,r=()=>{a(t.id)};return e.jsxs(ys,{variant:s.variant,className:z("relative transition-all duration-300 ease-in-out",s.className),children:[e.jsx(n,{className:"h-4 w-4"}),e.jsx(Ns,{className:"pr-8",children:t.message}),e.jsx("button",{onClick:r,className:"absolute right-2 top-2 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":"å…³é—­",children:e.jsx(ye,{className:"h-4 w-4"})})]})},Cs=({children:t})=>{const[a]=Te(Y);return e.jsxs(e.Fragment,{children:[t,a.length>0&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] w-full max-w-md px-4",children:e.jsx("div",{className:"space-y-2",children:a.map(s=>e.jsx(ws,{message:s},s.id))})})]})},Is=ve("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=g.forwardRef(({className:t,variant:a,size:s,asChild:n=!1,...r},i)=>{const l=n?is:"button";return e.jsx(l,{className:z(Is({variant:a,size:s,className:t})),ref:i,...r})});w.displayName="Button";const K=os,Ds=rs,Je=g.forwardRef(({className:t,...a},s)=>e.jsx(Be,{ref:s,className:z("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));Je.displayName=Be.displayName;const J=g.forwardRef(({className:t,children:a,...s},n)=>e.jsxs(Ds,{children:[e.jsx(Je,{}),e.jsxs($e,{ref:n,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[a,e.jsxs(ls,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));J.displayName=$e.displayName;const Q=({className:t,...a})=>e.jsx("div",{className:z("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});Q.displayName="DialogHeader";const Ge=({className:t,...a})=>e.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});Ge.displayName="DialogFooter";const G=g.forwardRef(({className:t,...a},s)=>e.jsx(Le,{ref:s,className:z("text-lg font-semibold leading-none tracking-tight",t),...a}));G.displayName=Le.displayName;const H=g.forwardRef(({className:t,...a},s)=>e.jsx(_e,{ref:s,className:z("text-sm text-muted-foreground",t),...a}));H.displayName=_e.displayName;const Es=({isOpen:t,onClose:a,onConfirm:s})=>e.jsx(K,{open:t,onOpenChange:a,children:e.jsxs(J,{className:"max-w-md",children:[e.jsxs(Q,{children:[e.jsxs(G,{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"ç¡®è®¤æ¸…ç©ºç®€å†"})]}),e.jsx(H,{children:"æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰ç®€å†å†…å®¹ï¼Œè¯·è°¨æ…æ“ä½œã€‚"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç®€å†å†…å®¹å—ï¼Ÿæ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰å·²ä¿å­˜çš„æ•°æ®ï¼Œå¹¶æ¢å¤åˆå§‹çŠ¶æ€"}),e.jsx("p",{className:"text-red-600 text-sm mt-4 font-medium",children:"âš ï¸ æ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼Œè¯·è°¨æ…æ“ä½œï¼"})]}),e.jsxs(Ge,{className:"flex space-x-2",children:[e.jsx(w,{variant:"outline",onClick:a,className:"min-w-[80px]",children:"å–æ¶ˆ"}),e.jsx(w,{onClick:s,className:"min-w-[80px] bg-red-600 hover:bg-red-700",children:"ç¡®è®¤æ¸…ç©º"})]})]})}),He={id:"1",title:"æˆ‘çš„ç®€å†",template:"default",layout:"top-bottom",pageSettings:{enableMultiPage:!0,totalPages:2},sections:[{id:"basic-info",title:"åŸºæœ¬ä¿¡æ¯",iconName:"user",type:"basic",visible:!0,order:1,data:{avatar:"https://imgs.aixifan.com/o_1eemg57nh11nd4d01p9d17i31vi67.gif",name:"æ¸©è",email:"wenzhewu2@163.com",phone:"12345678901",gender:"ç”·",age:"22",location:"ä¸Šæµ·",website:"",customFields:[{id:"1",label:"0å¹´å·¥ä½œç»éªŒ",value:"",iconName:"briefcase"},{id:"2",label:"æœŸæœ›åŸå¸‚",value:"ä¸Šæµ·",iconName:"map-pin"},{id:"3",label:"ä¸ªäººç½‘ç«™",value:"https://nekolin.top",iconName:"globe"},{id:"4",label:"bç«™",value:"https://space.bilibili.com/13177962",iconName:"tv"}]}},{id:"advantages",title:"ä¸ªäººä¼˜åŠ¿",iconName:"star",type:"list",editorType:"text",visible:!0,order:2,data:{content:`1. ç†Ÿç»ƒä½¿ç”¨ OpenCV + Qt5 æŠ€æœ¯
2. æŒæ¡ javascript (es6+) å’Œ Vue  æŠ€æœ¯æ ˆã€‚`}},{id:"projects",title:"é¡¹ç›®ç»å†",iconName:"settings",type:"timeline",editorType:"timeline",visible:!0,order:3,data:[{description:`ä¸€ä¸ªåŸºäº shape predictor 68 face landmarks æ„å»ºçš„äººè„¸è¯†åˆ«çŒç¡æ£€æµ‹ï¼Œæä¾›é©¾é©¶å‘˜ç–²åŠ³è¿½è¸ªçš„ä½“éªŒã€‚
- è¿™ä»½é¡¹ç›®æ˜¯å¼€æºçš„ï¼Œåœ°å€ https://github.com/WindsorWu/Face-recognition-sleepiness-detection
- `,endDate:"",id:"1756977218779",secondarySubtitle:"",startDate:"",subtitle:"",title:"çŒç¡æ£€æµ‹ç³»ç»Ÿ"},{description:"ä¸€ä¸ªåŸºäºç™¾åº¦äº‘äººè„¸è¯†åˆ«æ„å»ºçš„åŸºäºæ™ºèƒ½AIè€ƒå‹¤ç³»ç»Ÿï¼Œå¯ä»¥ä¸ºå…¨æ ¡å¸ˆç”Ÿæä¾›è€ƒå‹¤æœåŠ¡ã€‚",endDate:"",id:"1758469873123",secondarySubtitle:"",startDate:"",subtitle:"",title:"æ™ºèƒ½AIè€ƒå‹¤ç³»ç»Ÿ"},{id:"1757064171447",title:"ä¸ªäººç½‘ç«™",subtitle:"å…¨æ ˆ",secondarySubtitle:"nekolin.top",startDate:"",endDate:"",description:`ä¸€ä¸ªåŸºäº Hexo æ„å»ºçš„åšå®¢ç½‘ç«™
- Googleæœç´¢"nekolin blog"ï¼Œæœ¬ç«™æ’åç¬¬ä¸€
- åŸºäºUpptime & Baidu Analytics å®ç°å…¨ç«™æµé‡ç»Ÿè®¡
- å½“ç„¶åšå®¢ç½‘ç«™æœ€é‡è¦çš„è¿˜æ˜¯å†…å®¹ï¼Œå¸Œæœ›æ‚¨èƒ½é€šè¿‡åšæ–‡æ¥æ›´å…¨é¢äº†è§£æˆ‘`}]},{id:"education",title:"æ•™è‚²èƒŒæ™¯",iconName:"graduation-cap",type:"timeline",editorType:"timeline",visible:!0,order:4,data:[{id:"1",title:"ä¸Šæµ·æ‰è¾¾å­¦é™¢",subtitle:"è½¯ä»¶å·¥ç¨‹å­¦å£«",secondarySubtitle:"2024.09 - 2026.06",startDate:"2024.09",endDate:"2026.06",description:""},{id:"2",title:"ä¸Šæµ·ç”µå­ä¿¡æ¯èŒä¸šæŠ€æœ¯å­¦é™¢",subtitle:"äººå·¥æ™ºèƒ½åº”ç”¨æŠ€æœ¯å¤§ä¸“",secondarySubtitle:"2021.09 - 2024.06",startDate:"2021.09",endDate:"2024.06",description:""}]},{id:"experience",title:"æ ¡å›­ç»å†",iconName:"briefcase",type:"timeline",editorType:"timeline",visible:!0,order:5,data:[{id:"1",title:"ä¸Šæµ·ç”µå­ä¿¡æ¯èŒä¸šæŠ€æœ¯å­¦é™¢æ ¡å›¢å§”ç¤¾ä¼šå®è·µéƒ¨",subtitle:"å‰¯éƒ¨é•¿ï¼ˆä¸»æŒå·¥ä½œï¼‰",secondarySubtitle:"",startDate:"2022.09",endDate:"2023.06",description:"è´Ÿè´£æ ¡çº§ç¤¾ä¼šå®è·µå„é¡¹æ´»åŠ¨å®¡æ ¸æ‹›å‹Ÿå·¥ä½œ\\n\\nã€ä¸»è¦èŒè´£ã€‘\\nâ€¢ \\n\\nã€æ ¸å¿ƒä¸šç»©ã€‘\\nâ€¢ "},{id:"2",title:"",subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:""}],pageNumber:2}]},P=at("resume-data",He),ks=A(null,(t,a)=>{a(P,He)}),Ps=A(null,(t,a,s)=>{const n=t(P),r=n.sections.map(i=>i.id===s.sectionId?{...i,data:s.data,...s.iconName!==void 0&&{iconName:s.iconName,icon:s.iconName}}:i);a(P,{...n,sections:r})}),Ts=A(null,(t,a,s)=>{const n=t(P),r=n.sections.map(i=>i.id===s.sectionId?{...i,...s.props}:i);a(P,{...n,sections:r})}),Rs=A(null,(t,a,s)=>{const n=t(P),r=n.sections.find(l=>l.type==="basic"),i=r?[r,...s]:s;a(P,{...n,sections:i})}),As=A(null,(t,a,s)=>{const n=t(P);a(P,{...n,sections:[...n.sections,s]})}),Fs=A(null,(t,a,s)=>{const n=t(P),r=n.sections.filter(i=>i.id!==s);a(P,{...n,sections:r})}),zs=A(t=>a=>t(P).sections.find(n=>n.id===a)),Ms=A(t=>t(P).sections.filter(s=>s.type!=="basic").sort((s,n)=>s.order-n.order)),Os=A(t=>t(P).sections.find(s=>s.type==="basic")),Bs=A(null,(t,a,s)=>{const n=t(P);a(P,{...n,pageSettings:s})}),$s=A(null,(t,a,s)=>{const n=t(P),r=n.sections.map(i=>{const l=s.find(o=>o.sectionId===i.id);return l?{...i,pageNumber:l.pageNumber}:i});a(P,{...n,sections:r})}),Ls=A(t=>a=>t(P).sections.filter(n=>n.type!=="basic").filter(n=>(n.pageNumber||1)===a).filter(n=>n.visible).sort((n,r)=>n.order-r.order)),ue=()=>{const t=B(Ps),a=B(Ts),s=B(Rs),n=B(As),r=B(Fs),i=B(Bs),l=B($s),o=B(ks),c=W(zs),d=W(Ms),m=W(Os),u=W(Ls);return{updateSection:(b,v,M)=>{t({sectionId:b,data:v,iconName:M})},updateSectionIcon:(b,v)=>{a({sectionId:b,props:{iconName:v}})},updateSectionTitle:(b,v)=>{a({sectionId:b,props:{title:v}})},updateSectionEditorType:(b,v)=>{a({sectionId:b,props:{editorType:v}})},toggleSectionVisibility:b=>{const v=c(b);v&&a({sectionId:b,props:{visible:!v.visible}})},toggleMultiPageMode:(b,v=2)=>{i({enableMultiPage:b,totalPages:v})},batchSetSectionsPage:b=>{l(b)},updateSectionsOrder:s,addSection:n,deleteSection:r,getSection:c,getNonBasicSections:d,getBasicSection:m,getSectionsByPage:u,clearResume:()=>{o()}}},_s=()=>{const t=W(P),{getNonBasicSections:a,toggleMultiPageMode:s,batchSetSectionsPage:n}=ue(),[r,i]=g.useState({}),l=t.pageSettings?.enableMultiPage||!1,o=a,c=g.useCallback(()=>{const y={};o.forEach(h=>{y[h.id]=h.pageNumber||1}),i(y)},[o]);g.useEffect(()=>{c()},[c]);const d=g.useCallback(()=>{s(!0,2),c()},[s,c]),m=g.useCallback(()=>{s(!1,1);const y=o.map(h=>({sectionId:h.id,pageNumber:1}));n(y)},[s,o,n]),u=g.useCallback((y,h)=>{i(f=>({...f,[y]:h}))},[]),x=g.useCallback(()=>{const y=Object.entries(r).map(([h,f])=>({sectionId:h,pageNumber:f}));n(y)},[r,n]),j=g.useCallback(()=>{const y={};o.forEach((h,f)=>{y[h.id]=f%2+1}),i(y)},[o]),C=g.useCallback(()=>{const y={};o.forEach(h=>{y[h.id]=1}),i(y)},[o]),N=g.useCallback(y=>Object.values(r).filter(h=>h===y).length,[r]);return{isMultiPageEnabled:l,sections:o,localPageAssignments:r,handleEnableMultiPage:d,handleDisableMultiPage:m,handleSectionPageChange:u,handleAutoAssign:j,handleResetAssignments:C,getPageSectionCount:N,applyPageAssignments:x}},Us=ve("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=g.forwardRef(({className:t,...a},s)=>e.jsx(Ue,{ref:s,className:z(Us(),t),...a}));T.displayName=Ue.displayName;const Vs=()=>{const[t,a]=g.useState(null),[s,n]=g.useState(""),[r,i]=g.useState(null),l=ae(ne(ie,{activationConstraint:{distance:8}})),{getNonBasicSections:o,updateSectionsOrder:c,updateSection:d,updateSectionTitle:m,updateSectionIcon:u,updateSectionEditorType:x,toggleSectionVisibility:j,deleteSection:C,addSection:N,getSection:y}=ue(),h=o,f=S=>S.editorType||"timeline",p=(S,D,E)=>{if(D===E)return S;if(D==="timeline"&&E==="list")return S.map(k=>({id:k.id,content:`${k.title}${k.subtitle?` - ${k.subtitle}`:""}${k.description?`: ${k.description}`:""}`}));if(D==="list"&&E==="timeline")return S.map(k=>({id:k.id,title:k.content.slice(0,50)+(k.content.length>50?"...":""),subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:k.content}));if(E==="text"){if(D==="timeline")return{content:S.map(k=>`${k.title}
${k.subtitle}
${k.description}`).join(`

`)};if(D==="list")return{content:S.map(k=>k.content).join(`
`)}}if(D==="text"){const k=S.content||"";if(E==="timeline")return[{id:Date.now().toString(),title:"æ ‡é¢˜",subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:k}];if(E==="list")return k.split(`
`).map((V,Xe)=>({id:(Date.now()+Xe).toString(),content:V}))}return S},b=(S,D)=>{const E=y(S);if(!E)return;const F=f(E),k=p(E.data,F,D);x(S,D),d(S,k)},v=S=>{const D=S.map((E,F)=>({...E,order:F+2}));c(D)},M=S=>{const D=h.findIndex(F=>F.id===S);if(D<=0)return;const E=[...h];[E[D-1],E[D]]=[E[D],E[D-1]],v(E)},I=S=>{const D=h.findIndex(F=>F.id===S);if(D>=h.length-1)return;const E=[...h];[E[D],E[D+1]]=[E[D+1],E[D]],v(E)},R=S=>{const{active:D,over:E}=S;if(!E||D.id===E.id)return;const F=h.findIndex(V=>V.id===D.id),k=h.findIndex(V=>V.id===E.id);if(F!==-1&&k!==-1){const V=le(h,F,k);v(V)}},_=S=>{j(S)},$=S=>{C(S)},Z=S=>{a(S.id),n(S.title)},U=()=>{t&&s.trim()&&(m(t,s.trim()),a(null),n(""))},qe=()=>{a(null),n("")},Ke=(S,D)=>{u(S,D)},Qe=()=>{const S={id:`custom-${Date.now()}`,title:"æ–°æ¨¡å—",iconName:"star",type:"timeline",editorType:"timeline",visible:!0,order:h.length+2,data:[]};N(S),Z(S)},Ze={sensors:l,onDragEnd:R,sortableItems:h.map(S=>S.id),strategy:re};return{managedSections:h,editingId:t,editingTitle:s,showIconSelector:r,setEditingTitle:n,setShowIconSelector:i,deleteSection:$,addCustomSection:Qe,startEditing:Z,saveEditing:U,cancelEditing:qe,updateSectionIcon:Ke,getEditorType:f,updateEditorType:b,toggleVisibility:_,moveUp:M,moveDown:I,dragConfig:Ze,handleDragEnd:R}},pe=[{name:"user",icon:Re,label:"ç”¨æˆ·"},{name:"mail",icon:Ae,label:"é‚®ç®±"},{name:"phone",icon:Fe,label:"ç”µè¯"},{name:"map-pin",icon:ot,label:"ä½ç½®"},{name:"home",icon:ct,label:"å®¶åº­"},{name:"car",icon:dt,label:"äº¤é€š"},{name:"briefcase",icon:mt,label:"å·¥ä½œ"},{name:"building",icon:ut,label:"å…¬å¸"},{name:"graduation-cap",icon:xt,label:"æ•™è‚²"},{name:"award",icon:gt,label:"å¥–é¡¹"},{name:"trophy",icon:ht,label:"æˆå°±"},{name:"rocket",icon:pt,label:"åˆ›ä¸š"},{name:"code",icon:ft,label:"ç¼–ç¨‹"},{name:"database",icon:bt,label:"æ•°æ®åº“"},{name:"cloud",icon:jt,label:"äº‘è®¡ç®—"},{name:"cpu",icon:vt,label:"ç¡¬ä»¶"},{name:"wifi",icon:yt,label:"ç½‘ç»œ"},{name:"shield",icon:Nt,label:"å®‰å…¨"},{name:"monitor",icon:St,label:"å‰ç«¯"},{name:"smartphone",icon:wt,label:"ç§»åŠ¨ç«¯"},{name:"settings",icon:te,label:"è¿ç»´"},{name:"github",icon:Ct,label:"GitHub"},{name:"linkedin",icon:It,label:"LinkedIn"},{name:"twitter",icon:Dt,label:"Twitter"},{name:"instagram",icon:Et,label:"Instagram"},{name:"youtube",icon:kt,label:"YouTube"},{name:"facebook",icon:Pt,label:"Facebook"},{name:"message-circle",icon:Tt,label:"å¾®ä¿¡"},{name:"link",icon:Rt,label:"é“¾æ¥"},{name:"tv",icon:At,label:"ç”µè§†"},{name:"camera",icon:Ft,label:"æ‘„å½±"},{name:"music",icon:zt,label:"éŸ³ä¹"},{name:"headphones",icon:Mt,label:"éŸ³å“"},{name:"palette",icon:Ot,label:"è®¾è®¡"},{name:"gamepad-2",icon:Bt,label:"æ¸¸æˆ"},{name:"plane",icon:$t,label:"æ—…è¡Œ"},{name:"book",icon:Lt,label:"é˜…è¯»"},{name:"coffee",icon:_t,label:"å’–å•¡"},{name:"globe",icon:Ut,label:"ç½‘ç«™"},{name:"calendar",icon:ze,label:"æ—¶é—´"},{name:"file-text",icon:Ne,label:"æ–‡æ¡£"},{name:"shopping-bag",icon:Vt,label:"è´­ç‰©"},{name:"credit-card",icon:Jt,label:"é‡‘è"},{name:"star",icon:Me,label:"æ”¶è—"},{name:"heart",icon:Gt,label:"å–œæ¬¢"},{name:"target",icon:Ht,label:"ç›®æ ‡"},{name:"zap",icon:Wt,label:"èƒ½é‡"},{name:"folder",icon:Yt,label:"æ–‡ä»¶å¤¹"},{name:"briefcase-business",icon:qt,label:"å•†åŠ¡"}],X=({value:t,onChange:a,label:s="å›¾æ ‡"})=>{const[n,r]=g.useState(!1),i=pe.find(l=>l.name===t);return e.jsxs("div",{className:"space-y-2",children:[s&&e.jsx(T,{className:"text-sm font-medium text-gray-700",children:s}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>r(!n),className:"w-full justify-start h-10",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:"h-4 w-4"}),e.jsx("span",{children:i.label})]}):e.jsx("span",{className:"text-gray-500",children:"é€‰æ‹©å›¾æ ‡"})}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-6 gap-1 p-3",children:pe.map(l=>e.jsxs("button",{type:"button",onClick:()=>{a(l.name),r(!1)},className:`flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-100 transition-colors text-xs ${t===l.name?"bg-blue-50 text-blue-600":"text-gray-600"}`,title:l.label,children:[e.jsx(l.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate text-[10px] leading-tight",children:l.label})]},l.name))})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},ee=({iconName:t,className:a,onClick:s})=>{const n=pe.find(r=>r.name===t)?.icon;return n?e.jsx(n,{className:a,onClick:s}):null},O=g.forwardRef(({className:t,type:a,...s},n)=>e.jsx("input",{type:a,className:z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));O.displayName="Input";const Js=({value:t,onValueChange:a,placeholder:s,options:n,className:r})=>e.jsxs("select",{value:t||"",onChange:i=>a?.(i.target.value),className:z("flex h-8 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-1 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",r),children:[s&&e.jsx("option",{value:"",disabled:!0,children:s}),n.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]}),Ie=[{value:"timeline",label:"æ—¶é—´çº¿ç¼–è¾‘å™¨",description:"é€‚åˆå·¥ä½œç»å†ã€æ•™è‚²èƒŒæ™¯ç­‰æ—¶åºä¿¡æ¯",icon:ze},{value:"text",label:"æ–‡æœ¬ç¼–è¾‘å™¨",description:"é€‚åˆè‡ªæˆ‘ä»‹ç»ã€å¤‡æ³¨ç­‰è‡ªç”±æ–‡æœ¬",icon:Kt}],Gs=({section:t,isEditing:a,editingTitle:s,onStartEditing:n,onSaveEditing:r,onCancelEditing:i,onTitleChange:l,onIconChange:o,onEditorTypeChange:c,onDelete:d,getEditorType:m})=>{const{attributes:u,listeners:x,setNodeRef:j,transform:C,transition:N,isDragging:y}=oe({id:t.id,disabled:a}),h={transform:ce.Transform.toString(C),transition:N,opacity:y?.5:1},f=m(t),p=Ie.find(v=>v.value===f),b=v=>{c(v)};return e.jsx("div",{ref:j,style:h,className:`group border border-gray-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-all duration-200 ${y?"shadow-lg scale-105":""}`,children:e.jsxs("div",{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{...u,...x,className:`flex-shrink-0 p-1 rounded hover:bg-gray-100 transition-colors cursor-grab active:cursor-grabbing ${a?"cursor-not-allowed opacity-50":""}`,children:e.jsx(L,{className:"h-4 w-4 text-gray-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:a?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{htmlFor:`title-${t.id}`,className:"text-xs text-gray-500",children:"æ¨¡å—æ ‡é¢˜"}),e.jsx(O,{id:`title-${t.id}`,value:s,onChange:v=>l(v.target.value),placeholder:"è¯·è¾“å…¥æ¨¡å—æ ‡é¢˜",className:"h-8 text-sm"})]}),e.jsx("div",{className:"space-y-1",children:e.jsx(X,{value:t.iconName,onChange:o,label:"å›¾æ ‡"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(T,{htmlFor:`editor-${t.id}`,className:"text-xs text-gray-500",children:"ç¼–è¾‘å™¨ç±»å‹"}),e.jsx(Js,{value:f,onValueChange:b,placeholder:"é€‰æ‹©ç¼–è¾‘å™¨ç±»å‹",options:Ie})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsxs(w,{onClick:r,size:"sm",className:"h-7 px-2 text-xs bg-blue-600 hover:bg-blue-700",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"ä¿å­˜"]}),e.jsxs(w,{onClick:i,variant:"outline",size:"sm",className:"h-7 px-2 text-xs",children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"å–æ¶ˆ"]})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p?.label," â€¢ ",t.visible?"æ˜¾ç¤ºä¸­":"å·²éšè—",t.pageNumber&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:["ç¬¬",t.pageNumber,"é¡µ"]})]})]})}),!a&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(w,{onClick:n,variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-gray-100",children:e.jsx(Zt,{className:"h-3 w-3 text-gray-600"})}),e.jsx(w,{onClick:d,variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-red-50 hover:text-red-600",children:e.jsx(q,{className:"h-3 w-3"})})]})]})})},Hs=()=>{const{managedSections:t,editingId:a,editingTitle:s,setEditingTitle:n,deleteSection:r,addCustomSection:i,startEditing:l,saveEditing:o,cancelEditing:c,updateSectionIcon:d,getEditorType:m,updateEditorType:u,dragConfig:x}=Vs();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium text-gray-700",children:["æ¨¡å—åˆ—è¡¨ (",t.length,")"]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"æ‹–æ‹½è°ƒæ•´é¡ºåº"]})]}),e.jsx(de,{sensors:x.sensors,onDragEnd:x.onDragEnd,children:e.jsx(me,{items:x.sortableItems,strategy:x.strategy,children:e.jsx("div",{className:"space-y-3",children:t.map(j=>e.jsx(Gs,{section:j,isEditing:a===j.id,editingTitle:s,onStartEditing:()=>l(j),onSaveEditing:o,onCancelEditing:c,onTitleChange:n,onIconChange:C=>d(j.id,C),onEditorTypeChange:C=>u(j.id,C),onDelete:()=>r(j.id),getEditorType:m},j.id))})})}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"è¿˜æ²¡æœ‰è‡ªå®šä¹‰æ¨¡å—"}),e.jsx("p",{className:"text-sm",children:"ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡å—"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"æ·»åŠ æ–°æ¨¡å—"}),e.jsxs(w,{onClick:i,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"æ·»åŠ æ¨¡å—"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"æ–°æ·»åŠ çš„æ¨¡å—å°†æ˜¾ç¤ºåœ¨æ¨¡å—åˆ—è¡¨çš„æœ€åï¼Œä½ å¯ä»¥é€šè¿‡æ‹–æ‹½è°ƒæ•´ä½ç½®ã€‚"})]})]})},De=({pageNumber:t,sections:a,sectionCount:s,localPageAssignments:n})=>{const r=a.filter(i=>n[i.id]===t);return e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["ç¬¬ ",t," é¡µ (",s," ä¸ªæ¨¡å—)"]}),t===1&&e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"åŸºæœ¬ä¿¡æ¯ï¼ˆå›ºå®šï¼‰"}),r.map(i=>e.jsxs("div",{className:"text-xs text-gray-600 py-1",children:["â€¢ ",i.title]},i.id)),s===0&&t===2&&e.jsx("div",{className:"text-xs text-gray-400 italic",children:"æš‚æ— æ¨¡å—"})]})},Ws=({section:t,currentPage:a,onPageChange:s})=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t.title}),!t.visible&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"å·²éšè—"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{size:"sm",variant:a===1?"default":"outline",onClick:()=>s(t.id,1),children:"ç¬¬ 1 é¡µ"}),e.jsx(w,{size:"sm",variant:a===2?"default":"outline",onClick:()=>s(t.id,2),children:"ç¬¬ 2 é¡µ"})]})]}),Ys=({pageSettings:t})=>{const{isMultiPageEnabled:a,sections:s,localPageAssignments:n,handleEnableMultiPage:r,handleDisableMultiPage:i,handleSectionPageChange:l,handleAutoAssign:o,handleResetAssignments:c,getPageSectionCount:d}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(T,{className:"text-sm font-medium text-gray-700",children:["å¤šé¡µæ¨¡å¼ ",a?"ï¼ˆå·²å¯ç”¨ï¼‰":"ï¼ˆå·²ç¦ç”¨ï¼‰"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a?"ç®€å†å°†åˆ†ä¸ºä¸¤é¡µæ˜¾ç¤ºï¼Œä½ å¯ä»¥è‡ªç”±åˆ†é…æ¨¡å—åˆ°ä¸åŒé¡µé¢":"ç‚¹å‡»å¯ç”¨åï¼Œå¯ä»¥å°†ç®€å†åˆ†ä¸ºä¸¤é¡µ"})]}),e.jsx("div",{className:"flex gap-2",children:a?e.jsx(w,{onClick:i,variant:"outline",children:"ç¦ç”¨å¤šé¡µ"}):e.jsx(w,{onClick:r,className:"bg-green-600 hover:bg-green-700",children:"å¯ç”¨å¤šé¡µ"})})]})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"æ¨¡å—é¡µé¢åˆ†é…"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{onClick:o,size:"sm",variant:"outline",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"è‡ªåŠ¨åˆ†é…"]}),e.jsxs(w,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(Xt,{className:"h-4 w-4 mr-1"}),"é‡ç½®"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(De,{pageNumber:1,sections:s,sectionCount:d(1),localPageAssignments:n}),e.jsx(De,{pageNumber:2,sections:s,sectionCount:d(2),localPageAssignments:n})]}),e.jsx("div",{className:"space-y-2",children:s.map(m=>e.jsx(Ws,{section:m,currentPage:n[m.id]||1,onPageChange:l},m.id))})]})]})},qs=({activeTab:t,onTabChange:a})=>{const s=[{id:"modules",label:"æ¨¡å—ç®¡ç†",icon:es},{id:"pages",label:"å¤šé¡µè®¾ç½®",icon:Ne}];return e.jsx("div",{className:"flex border-b",children:s.map(n=>{const r=n.icon;return e.jsxs(w,{onClick:()=>a(n.id),variant:"ghost",className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 rounded-none h-auto transition-colors ${t===n.id?"border-blue-500 text-blue-600 bg-transparent hover:bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(r,{className:"h-4 w-4"}),n.label]},n.id)})})},Ks=({isOpen:t,onClose:a})=>{const[s,n]=g.useState("modules"),r=_s(),i=()=>{r.applyPageAssignments(),a()};return g.useEffect(()=>{r.applyPageAssignments()},[s]),e.jsx(K,{open:t,onOpenChange:i,children:e.jsxs(J,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Q,{children:[e.jsxs(G,{className:"flex items-center gap-3 text-xl font-semibold text-gray-900",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:e.jsx(te,{className:"h-6 w-6 text-white"})}),e.jsx("span",{children:"ç®€å†è®¾ç½®"})]}),e.jsx(H,{children:"ç®¡ç†ç®€å†çš„æ¨¡å—å’Œé¡µé¢è®¾ç½®ï¼Œæ‹–æ‹½è°ƒæ•´é¡ºåºï¼Œå…³é—­æ—¶è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ›´æ”¹ã€‚"})]}),e.jsx(qs,{activeTab:s,onTabChange:n}),e.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto",children:[s==="modules"&&e.jsx(Hs,{}),s==="pages"&&e.jsx(Ys,{pageSettings:r})]})]})})};function Qs({delayDuration:t=0,...a}){return e.jsx(gs,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function fe({...t}){return e.jsx(Qs,{children:e.jsx(cs,{"data-slot":"tooltip",...t})})}function be({...t}){return e.jsx(ds,{"data-slot":"tooltip-trigger",...t})}function je({className:t,sideOffset:a=0,children:s,...n}){return e.jsx(ms,{children:e.jsxs(us,{"data-slot":"tooltip-content",sideOffset:a,className:z("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[s,e.jsx(xs,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Zs=()=>{const[t,a]=Te(P);return{handleExportJson:()=>{const r=JSON.parse(JSON.stringify(t)),i=r.sections.find(m=>m.id==="basic-info");i&&(i.data.avatar="");const l=JSON.stringify(r),o=new Blob([l],{type:"application/json"}),c=URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download="resume.json",d.click(),URL.revokeObjectURL(c),d.remove()},handleImportJson:r=>{const i=new FileReader;i.onload=l=>{const o=JSON.parse(l.target?.result);a(o)},i.readAsText(r)}}},Xs=({onPreview:t,onClear:a,onManageResume:s})=>{const{handleImportJson:n}=Zs();return e.jsxs(e.Fragment,{children:[e.jsxs(w,{onClick:s,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"ç®€å†è®¾ç½®"})]}),e.jsxs(w,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"é¢„è§ˆå¯¼å‡º"})]}),e.jsx("input",{type:"file",id:"import-json-input",accept:"application/json",onChange:r=>{n(r.target?.files?.[0])},className:"hidden"}),e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(w,{variant:"outline",onClick:()=>{const r=document.getElementById("import-json-input");r&&r.click()},children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"å¯¼å…¥JSON"})]})}),e.jsx(je,{children:e.jsx("p",{children:"ä»…æ”¯æŒæœ¬å·¥å…·å¯¼å‡ºçš„JSONæ–‡ä»¶ï¼Œå¯¼å…¥åä¼šè¦†ç›–å½“å‰ç®€å†"})})]}),e.jsxs(w,{onClick:a,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"æ¸…ç©º"})]}),e.jsx("div",{className:"hidden lg:block text-xs text-gray-500",children:"ğŸ’¡ ç‚¹å‡»æ¨¡å—å³ä¸Šè§’ç¼–è¾‘æŒ‰é’®ä¿®æ”¹å†…å®¹"})]})},ea=()=>e.jsx("footer",{className:"mt-12 py-6 text-center text-gray-500 text-xs",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx("p",{children:"âœ¨ è®©æ¯ä¸€ä»½ç®€å†éƒ½é—ªé—ªå‘å…‰ âœ¨"}),e.jsx("p",{className:"mt-1 text-gray-400",children:"æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æµè§ˆå™¨ï¼Œåˆ·æ–°é¡µé¢ä¸ä¼šä¸¢å¤±"})]})}),ta=({children:t})=>e.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ne,{className:"h-5 w-5 text-white"})}),e.jsx(as,{className:"absolute -top-0.5 -right-0.5 h-3 w-3 text-yellow-400"})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Resumaker"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-full bg-gray-50 hover:bg-gray-100 transition-all duration-200 cursor-pointer border border-gray-200 hover:border-gray-300 hover:shadow-md",children:e.jsx(ee,{iconName:"github",className:"h-4 w-4 text-gray-600 hover:text-gray-800 transition-colors duration-200",onClick:()=>{window.open("https://github.com/WhiteP1ay/resumaker","_blank")}})})}),e.jsx(je,{children:e.jsx("p",{children:"GitHub æºç ï¼Œç»™ä¸ªâ­ï¸~~"})})]}),e.jsxs(fe,{children:[e.jsx(be,{asChild:!0,children:e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-full bg-gradient-to-br from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 transition-all duration-200 cursor-pointer border border-blue-200 hover:border-blue-300 hover:shadow-md",children:e.jsx(ee,{iconName:"globe",className:"h-4 w-4 text-blue-600 hover:text-blue-700 transition-colors duration-200",onClick:()=>{window.open("https://whitemeta.cn","_blank")}})})}),e.jsx(je,{children:e.jsx("p",{children:"ä¸ªäººç½‘ç«™ï¼Œæ¬¢è¿è®¿é—®"})})]})]}),t]})]})})}),sa=(t,a)=>{const s=g.useRef(t);g.useEffect(()=>{s.current=t});const n=g.useMemo(()=>st((...r)=>s.current(...r),a),[a]);return g.useEffect(()=>()=>{n.cancel()},[n]),n},xe=({isOpen:t,initialData:a,onSave:s,onClose:n,debounceDelay:r=500,isEqual:i=(l,o)=>JSON.stringify(l)===JSON.stringify(o)})=>{const[l,o]=g.useState(a),[c,d]=g.useState(!1),m=g.useRef(!1),u=g.useRef(l),x=g.useRef(a);g.useEffect(()=>{u.current=l},[l]);const j=sa(N=>{d(!0);try{s(N),x.current=N}finally{setTimeout(()=>d(!1),300)}},r);g.useEffect(()=>{m.current&&t&&!i(l,x.current)&&j(l)},[l,t,j,i]),g.useEffect(()=>{t?m.current||(o(a),x.current=a,d(!1),m.current=!0):(m.current=!1,d(!1))},[t,a]);const C=g.useCallback(()=>{if(m.current){const N=u.current;if(!i(N,x.current)){try{j.flush()}catch(h){console.warn("Debounce flush failed, saving directly:",h)}s(N)}}n()},[j,s,n,i]);return{data:l,setData:o,isSaving:c,handleClose:C,saveStatusText:c?"ä¿å­˜ä¸­...":"è‡ªåŠ¨ä¿å­˜"}},aa=(t,a)=>{const[s,n]=g.useState(t),[r,i]=g.useState(""),[l,o]=g.useState(!1);return{previewUrl:s,originalImageUrl:r,showCropper:l,handleFileSelect:x=>{const j=new FileReader;return j.onload=C=>{const N=C.target?.result;i(N),o(!0)},j.readAsDataURL(x),!0},handleCropSave:x=>{n(x),a?.(x),o(!1)},handleCropExisting:()=>{s&&(i(s),o(!0))},handleRemove:()=>{n(void 0),a?.("")},setShowCropper:o}},na={sm:"w-16 h-20 print:w-14 print:h-18",md:"w-24 h-32 print:w-20 print:h-28",lg:"w-32 h-40 print:w-28 print:h-36"},We=({src:t,alt:a="å¤´åƒ",size:s="md",className:n=""})=>e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:Pe(`${na[s]} rounded-lg overflow-hidden ${n}`,"bg-gray-200 border border-gray-300"),children:e.jsx("img",{src:t,alt:a,className:"w-full h-full object-cover"})})}),ia=({onFileSelect:t,accept:a="image/*",children:s,className:n,variant:r="outline",size:i="sm"})=>{const l=g.useRef(null),o=()=>{l.current?.click()},c=d=>{const m=d.target.files?.[0];m&&(t(m),l.current&&(l.current.value=""))};return e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:o,size:i,variant:r,className:n,children:s}),e.jsx("input",{ref:l,type:"file",accept:a,onChange:c,className:"hidden"})]})},ra=ke.lazy(()=>Ve(()=>import("./AvatarCropper-CkfeBS-n.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),la=()=>e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),oa=({currentAvatar:t,onAvatarChange:a})=>{const{previewUrl:s,originalImageUrl:n,showCropper:r,handleFileSelect:i,handleCropSave:l,handleCropExisting:o,handleRemove:c,setShowCropper:d}=aa(t,a);return e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(We,{src:s,alt:"å¤´åƒé¢„è§ˆ",size:"lg"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ia,{onFileSelect:m=>i(m),children:s?"æ›´æ¢å¤´åƒ":"é€‰æ‹©å¤´åƒ"}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{onClick:o,size:"sm",variant:"outline",children:[e.jsx(ns,{className:"h-3 w-3 mr-1"}),"è£å‰ª"]}),e.jsx(w,{onClick:c,size:"sm",variant:"outline",children:"ç§»é™¤å¤´åƒ"})]})]}),r&&n&&e.jsx(g.Suspense,{fallback:e.jsx(la,{}),children:e.jsx(ra,{isOpen:r,onClose:()=>d(!1),imageSrc:n,onCropComplete:l})})]})},ca=({field:t,onUpdate:a,onDelete:s})=>{const[n,r]=g.useState(!1),[i,l]=g.useState(t.label),[o,c]=g.useState(t.value),[d,m]=g.useState(t.iconName),{attributes:u,listeners:x,setNodeRef:j,transform:C,transition:N,isDragging:y}=oe({id:t.id,disabled:n}),h={transform:ce.Transform.toString(C),transition:N,opacity:y?.5:1},f=()=>{a(t.id,{label:i,value:o,iconName:d}),r(!1)},p=()=>{l(t.label),c(t.value),m(t.iconName),r(!1)};return n?e.jsxs("div",{ref:j,style:h,className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:`label-${t.id}`,children:"å­—æ®µåç§°"}),e.jsx(O,{id:`label-${t.id}`,value:i,onChange:b=>l(b.target.value),placeholder:"å¦‚ï¼šä¸ªäººç½‘ç«™ã€GitHubç­‰"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:`value-${t.id}`,children:"å­—æ®µå€¼"}),e.jsx(O,{id:`value-${t.id}`,value:o,onChange:b=>c(b.target.value),placeholder:"å¦‚ï¼šhttps://example.com"})]})]}),e.jsx("div",{children:e.jsx(X,{value:d,onChange:m,label:"å›¾æ ‡"})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:p,children:"å–æ¶ˆ"}),e.jsx(w,{size:"sm",onClick:f,children:"ä¿å­˜"})]})]}):e.jsxs("div",{ref:j,style:h,className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{...u,...x,className:"cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(L,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.label}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.value})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>r(!0),children:"ç¼–è¾‘"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>s(t.id),children:e.jsx(q,{className:"h-4 w-4 text-red-500"})})]})]})},da=({id:t,label:a,type:s="text",value:n,placeholder:r,onChange:i})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:t,children:a}),e.jsx(O,{id:t,type:s,value:n,onChange:l=>i(l.target.value),placeholder:r})]}),ma=({isOpen:t,onClose:a,initialData:s,onSave:n})=>{const r=ae(ne(ie,{activationConstraint:{distance:8}})),{data:i,setData:l,handleClose:o,saveStatusText:c}=xe({isOpen:t,initialData:{...s,customFields:s.customFields||[]},onSave:n,onClose:a,debounceDelay:300}),[d,m]=g.useState(null),u=(f,p)=>{l(b=>({...b,[f]:p}))},x=f=>{l(p=>({...p,avatar:f}))},j=()=>{const f={id:Date.now().toString(),label:"",value:"",icon:"star",iconName:"star"};l(p=>({...p,customFields:[...p.customFields||[],f]})),m(f.id)},C=(f,p)=>{l(b=>({...b,customFields:b.customFields?.map(v=>v.id===f?{...v,...p}:v)||[]}))},N=f=>{l(p=>({...p,customFields:p.customFields?.filter(b=>b.id!==f)||[]})),d===f&&m(null)},y=f=>{const{active:p,over:b}=f;if(!b||p.id===b.id||!i.customFields)return;const v=i.customFields.findIndex(I=>I.id===p.id),M=i.customFields.findIndex(I=>I.id===b.id);if(v!==-1&&M!==-1){const I=le(i.customFields,v,M);l(R=>({...R,customFields:I}))}},h=[{id:"name",label:"å§“å",type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„å§“å"},{id:"gender",label:"æ€§åˆ«",type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„æ€§åˆ«"},{id:"age",label:"å¹´é¾„",type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„å¹´é¾„"},{id:"phone",label:"ç”µè¯",type:"tel",placeholder:"+86 138 0013 8000"},{id:"email",label:"é‚®ç®±",type:"email",placeholder:"your.email@example.com"}];return e.jsx(K,{open:t,onOpenChange:o,children:e.jsxs(J,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsx("span",{children:"ç¼–è¾‘åŸºæœ¬ä¿¡æ¯"}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:c})]}),e.jsx(H,{children:"ç¼–è¾‘ä¸ªäººåŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å§“åã€è”ç³»æ–¹å¼ç­‰ï¼Œæ‰€æœ‰æ›´æ”¹å°†è‡ªåŠ¨ä¿å­˜ã€‚"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"å¤´åƒ"}),e.jsx(oa,{currentAvatar:i.avatar,onAvatarChange:x})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(f=>e.jsx(da,{id:f.id,label:f.label,type:f.type,value:i[f.id]||"",placeholder:f.placeholder,onChange:p=>u(f.id,p)},f.id))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"è‡ªå®šä¹‰å­—æ®µ"}),e.jsxs(w,{onClick:j,size:"sm",variant:"outline",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"æ·»åŠ å­—æ®µ"]})]}),i.customFields&&i.customFields.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"æ‹–æ‹½è°ƒæ•´å­—æ®µé¡ºåº"]}),e.jsx(de,{sensors:r,onDragEnd:y,children:e.jsx(me,{items:i.customFields.map(f=>f.id),strategy:re,children:e.jsx("div",{className:"space-y-3",children:i.customFields.map(f=>e.jsx(ca,{field:f,onUpdate:(p,b)=>C(p,b),onDelete:p=>N(p)},f.id))})})})]})]})]})]})})},ua=(t,a,s,n,r)=>{const i=ae(ne(ie,{activationConstraint:{distance:8}})),{data:l,setData:o,handleClose:c,saveStatusText:d}=xe({isOpen:t,initialData:{items:a,selectedIcon:s},onSave:p=>n(p.items,p.selectedIcon),onClose:r,debounceDelay:300}),{items:m,selectedIcon:u}=l,x=p=>{o({...l,items:p})},j=p=>{o({...l,selectedIcon:p})},C=()=>{const p={id:Date.now().toString(),content:""};x([...m,p])},N=p=>{x(m.filter(b=>b.id!==p))},y=(p,b)=>{x(m.map(v=>v.id===p?{...v,content:b}:v))},h=p=>{const{active:b,over:v}=p;if(!v||b.id===v.id)return;const M=m.findIndex(R=>R.id===b.id),I=m.findIndex(R=>R.id===v.id);if(M!==-1&&I!==-1){const R=le(m,M,I);x(R)}},f=(p,b)=>{const v=[...m],[M]=v.splice(p,1);v.splice(b,0,M),x(v)};return{items:m,selectedIcon:u,saveStatusText:d,dragConfig:{sensors:i,onDragEnd:h,sortableItems:m.map(p=>p.id),strategy:re},addItem:C,removeItem:N,updateItem:y,moveItem:f,setSelectedIcon:j,handleClose:c}},ge=g.forwardRef(({className:t,...a},s)=>e.jsx("textarea",{className:z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a}));ge.displayName="Textarea";const xa=({item:t,index:a,onUpdate:s,onRemove:n})=>{const{attributes:r,listeners:i,setNodeRef:l,transform:o,transition:c,isDragging:d}=oe({id:t.id}),m={transform:ce.Transform.toString(o),transition:c,opacity:d?.5:1};return e.jsxs("div",{ref:l,style:m,className:"flex items-start space-x-2 group",children:[e.jsxs("div",{className:"flex flex-col items-center mt-2",children:[e.jsx("div",{...r,...i,className:"cursor-move",children:e.jsx(L,{className:"h-4 w-4 text-gray-400"})}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:a+1})]}),e.jsx("div",{className:"flex-1",children:e.jsx(ge,{value:t.content,onChange:u=>s(t.id,u.target.value),placeholder:`è¯·è¾“å…¥ç¬¬ ${a+1} é¡¹å†…å®¹...`,className:"min-h-[80px] resize-none",rows:3})}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"mt-2 text-red-600 hover:text-red-700 hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(q,{className:"h-4 w-4"})})]})},ga=({isOpen:t,onClose:a,initialData:s,onSave:n,title:r,currentIcon:i})=>{const{items:l,selectedIcon:o,saveStatusText:c,dragConfig:d,addItem:m,removeItem:u,updateItem:x,setSelectedIcon:j,handleClose:C}=ua(t,s,i,n,a);return e.jsx(K,{open:t,onOpenChange:C,children:e.jsxs(J,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(G,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsxs("span",{children:["ç¼–è¾‘",r]}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:c})]}),e.jsxs(H,{children:["åœ¨æ­¤å¤„ç¼–è¾‘æ‚¨çš„",r,"ä¿¡æ¯ï¼Œæ‰€æœ‰æ›´æ”¹å°†è‡ªåŠ¨ä¿å­˜ã€‚"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{value:o,onChange:j,label:"å›¾æ ‡"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"åˆ—è¡¨å†…å®¹"}),e.jsxs(w,{onClick:m,size:"sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"æ·»åŠ é¡¹ç›®"]})]}),l.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"æ‹–æ‹½è°ƒæ•´é¡¹ç›®é¡ºåº"]}),e.jsx(de,{sensors:d.sensors,onDragEnd:d.onDragEnd,children:e.jsx(me,{items:d.sortableItems,strategy:d.strategy,children:e.jsx("div",{className:"space-y-3",children:l.map((N,y)=>e.jsx(xa,{item:N,index:y,onUpdate:x,onRemove:u},N.id))})})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:'æš‚æ— å†…å®¹ï¼Œç‚¹å‡»"æ·»åŠ é¡¹ç›®"å¼€å§‹åˆ›å»º'})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"ğŸ’¡ ä½¿ç”¨æç¤º"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ é€‚ç”¨äºä¸ªäººä¼˜åŠ¿ã€æŠ€èƒ½ç‰¹é•¿ç­‰åˆ—è¡¨å½¢å¼çš„å†…å®¹"}),e.jsx("li",{children:"â€¢ æ¯ä¸€é¡¹å†…å®¹ä¼šåœ¨ç®€å†ä¸­è‡ªåŠ¨ç¼–å·æ˜¾ç¤º"}),e.jsx("li",{children:"â€¢ å¯ä»¥æ‹–æ‹½è°ƒæ•´é¡¹ç›®é¡ºåº"}),e.jsx("li",{children:"â€¢ æ”¯æŒå¤šè¡Œæ–‡æœ¬ï¼Œè¯¦ç»†æè¿°æ‚¨çš„ä¼˜åŠ¿"})]})]})]})]})})},ha=(t,a,s,n,r)=>{const{data:i,setData:l,handleClose:o,saveStatusText:c}=xe({isOpen:t,initialData:{content:a.content,selectedIcon:s,iconEnabled:!!s&&s!==""},onSave:h=>n({content:h.content},h.iconEnabled?h.selectedIcon:""),onClose:r,debounceDelay:300}),{content:d,selectedIcon:m,iconEnabled:u}=i,x=h=>{l({...i,content:h})},j=h=>{l({...i,selectedIcon:h})},C=h=>{l({...i,iconEnabled:h})},{wordCount:N,lineCount:y}=g.useMemo(()=>{const h=d.length,f=d.split(`
`).length;return{wordCount:h,lineCount:f}},[d]);return{content:d,selectedIcon:m,iconEnabled:u,wordCount:N,lineCount:y,saveStatusText:c,setContent:x,setSelectedIcon:j,setIconEnabled:C,handleClose:o}},pa=({isOpen:t,onClose:a,title:s,initialData:n,onSave:r,selectedIcon:i})=>{const{content:l,selectedIcon:o,iconEnabled:c,saveStatusText:d,wordCount:m,lineCount:u,setContent:x,setSelectedIcon:j,setIconEnabled:C,handleClose:N}=ha(t,n,i,r,a);return e.jsx(K,{open:t,onOpenChange:N,children:e.jsxs(J,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(G,{className:"flex items-center",children:["ç¼–è¾‘ ",s,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:d})]}),e.jsxs(H,{children:["åœ¨æ­¤å¤„ç¼–è¾‘æ‚¨çš„",s,"ä¿¡æ¯ï¼Œæ‰€æœ‰æ›´æ”¹å°†è‡ªåŠ¨ä¿å­˜ã€‚"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"icon-toggle",checked:c,onChange:y=>C(y.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("label",{htmlFor:"icon-toggle",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"æ˜¾ç¤ºæ¨¡å—å›¾æ ‡"})]}),c&&e.jsx("div",{className:"pl-6 border-l-2 border-blue-100",children:e.jsx(X,{value:o,onChange:j,label:"å›¾æ ‡"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"å†…å®¹"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m," å­—ç¬¦ Â· ",u," è¡Œ"]})]}),e.jsx(ge,{value:l,onChange:y=>x(y.target.value),placeholder:"è¯·è¾“å…¥å†…å®¹...",className:"min-h-[200px] resize-y"})]})]})]})})},fa=(t,a,s,n,r)=>{const[i,l]=g.useState(!1),o=ae(ne(ie,{activationConstraint:{distance:8}})),{data:c,setData:d,handleClose:m,saveStatusText:u}=xe({isOpen:t,initialData:{items:a,selectedIcon:s,iconEnabled:!!s&&s!==""},onSave:I=>n(I.items,I.iconEnabled?I.selectedIcon:""),onClose:r,debounceDelay:500}),{items:x,selectedIcon:j,iconEnabled:C}=c,N=I=>{d({...c,items:I})},y=I=>{d({...c,selectedIcon:I})},h=I=>{d({...c,iconEnabled:I})},f=()=>{const I={id:Date.now().toString(),title:"",subtitle:"",secondarySubtitle:"",startDate:"",endDate:"",description:""};N([...x,I])},p=I=>{N(x.filter(R=>R.id!==I))},b=(I,R,_)=>{N(x.map($=>$.id===I?{...$,[R]:_}:$))},v=I=>{const{active:R,over:_}=I;if(!_||R.id===_.id)return;const $=x.findIndex(U=>U.id===R.id),Z=x.findIndex(U=>U.id===_.id);if($!==-1&&Z!==-1){const U=le(x,$,Z);N(U)}},M=()=>{l(!i)};return{items:x,selectedIcon:j,iconEnabled:C,isIconSelectorOpen:i,saveStatusText:u,dragConfig:{sensors:o,onDragEnd:v,sortableItems:x.map(I=>I.id),strategy:re},addItem:f,removeItem:p,updateItem:b,setSelectedIcon:y,setIconEnabled:h,toggleIconSelector:M,handleClose:m}},ba=({item:t,index:a,onUpdate:s,onRemove:n})=>{const{attributes:r,listeners:i,setNodeRef:l,transform:o,transition:c,isDragging:d}=oe({id:t.id}),m={transform:ce.Transform.toString(o),transition:c,opacity:d?.5:1};return e.jsxs("div",{ref:l,style:m,className:"border rounded-lg p-4 space-y-4 bg-white shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{...r,...i,className:"cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(L,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("h4",{className:"font-medium text-gray-800",children:["ç¬¬ ",a+1," é¡¹"]})]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"æ ‡é¢˜"}),e.jsx(O,{value:t.title,onChange:u=>s(t.id,"title",u.target.value),placeholder:"ä¾‹ï¼šé¡¹ç›®åç§°ã€å…¬å¸åç§°",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"å‰¯æ ‡é¢˜"}),e.jsx(O,{value:t.subtitle||"",onChange:u=>s(t.id,"subtitle",u.target.value),placeholder:"ä¾‹ï¼šèŒä½ã€ä¸“ä¸š",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"å¼€å§‹æ—¶é—´"}),e.jsx(O,{value:t.startDate||"",onChange:u=>s(t.id,"startDate",u.target.value),placeholder:"ä¾‹ï¼š2020å¹´9æœˆ",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"ç»“æŸæ—¶é—´"}),e.jsx(O,{value:t.endDate||"",onChange:u=>s(t.id,"endDate",u.target.value),placeholder:"ä¾‹ï¼š2024å¹´6æœˆ",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"æ¬¡è¦å‰¯æ ‡é¢˜"}),e.jsx(O,{value:t.secondarySubtitle||"",onChange:u=>s(t.id,"secondarySubtitle",u.target.value),placeholder:"",className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"è¯¦ç»†æè¿°"}),e.jsx(ge,{value:t.description,onChange:u=>s(t.id,"description",u.target.value),placeholder:"è¯¦ç»†æè¿°å·¥ä½œå†…å®¹ã€å­¦ä¹ ç»å†æˆ–é¡¹ç›®ç»éªŒ...",rows:4,className:"transition-all duration-200 focus:ring-2 focus:ring-blue-500"})]})]})},ja=({isOpen:t,onClose:a,initialData:s,onSave:n,title:r,currentIcon:i="briefcase"})=>{const{items:l,selectedIcon:o,saveStatusText:c,dragConfig:d,addItem:m,removeItem:u,updateItem:x,setSelectedIcon:j,handleClose:C}=fa(t,s,i,n,a);return e.jsx(K,{open:t,onOpenChange:C,children:e.jsxs(J,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(G,{className:"text-xl font-semibold text-gray-800 flex items-center space-x-3",children:[e.jsxs("span",{children:["ç¼–è¾‘",r]}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-auto",children:c})]}),e.jsxs(H,{children:["åœ¨æ­¤å¤„ç¼–è¾‘æ‚¨çš„",r,"ä¿¡æ¯ï¼Œæ‰€æœ‰æ›´æ”¹å°†è‡ªåŠ¨ä¿å­˜ã€‚"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{value:o,onChange:j,label:"å›¾æ ‡"}),l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"æ‹–æ‹½è°ƒæ•´é¡¹ç›®é¡ºåº"]}),e.jsx(de,{sensors:d.sensors,onDragEnd:d.onDragEnd,children:e.jsx(me,{items:d.sortableItems,strategy:d.strategy,children:e.jsx("div",{className:"space-y-4",children:l.map((N,y)=>e.jsx(ba,{item:N,index:y,onUpdate:x,onRemove:u},N.id))})})})]}),e.jsxs(w,{onClick:m,variant:"outline",className:"w-full border-dashed border-2 hover:bg-blue-50",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"æ·»åŠ ä¸€é¡¹"]})]})]})})},Ye=t=>{const{updateSection:a}=ue();return{handleTimelineSave:(l,o)=>{a(t,l,o)},handleListSave:(l,o)=>{a(t,l,o)},handleTextSave:(l,o)=>{a(t,l,o)},handleBasicInfoSave:l=>{a(t,l)}}},va=t=>{const[a,s]=g.useState(!1),{handleBasicInfoSave:n}=Ye(t);return{isEditing:a,startEditing:()=>{s(!0)},closeEditing:()=>{s(!1)},handleSave:m=>{n(m)},formatGenderAge:(m,u)=>m&&u?`${m} | ${u}å²`:m||(u?`${u}å²`:""),formatCustomFields:m=>!m||m.length===0?"":m.map(u=>e.jsxs("span",{className:"flex items-center gap-1",children:[u.iconName&&e.jsx(ee,{iconName:u.iconName,className:"w-4 h-4"}),u.label," ",u.value]},u.id)),hasValue:m=>m&&m.trim()!==""}},he=({icon:t,children:a,className:s=""})=>e.jsxs("div",{className:`flex items-center space-x-1 ${s}`,children:[e.jsx(t,{className:"h-4 w-4 print:h-3 print:w-3"}),e.jsx("span",{children:a})]}),ya=({section:t,isEditable:a})=>{const s=t.data,{isEditing:n,startEditing:r,closeEditing:i,handleSave:l,formatGenderAge:o,formatCustomFields:c,hasValue:d}=va(t.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[a&&e.jsx(w,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:r,children:e.jsx(Oe,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-6 flex flex-col items-center px-[3rem]",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 print:mb-2",children:s.name||"å§“å"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600 print:gap-x-4",children:[(s.gender||s.age)&&e.jsx(he,{icon:Re,children:o(s.gender,s.age)}),d(s.phone)&&e.jsx(he,{icon:Fe,children:s.phone}),d(s.email)&&e.jsx(he,{icon:Ae,children:s.email})]}),s.customFields&&s.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600 mt-2 print:mt-1",children:c(s.customFields)})]}),e.jsx("div",{className:"shrink-0 hidden md:block print:block",children:e.jsx(We,{src:s.avatar,alt:s.name||"å¤´åƒ",size:"md"})})]})]}),n&&e.jsx(ma,{isOpen:!0,onClose:i,initialData:s,onSave:l})]})},Na=({data:t})=>e.jsx("div",{className:"space-y-3 print:space-y-2",children:t.map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600 mt-0.5 shrink-0",children:[s+1,"."]}),e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e.jsx("pre",{className:"text-wrap",children:a.content})})]},a.id))}),Sa=({data:t})=>e.jsx("div",{className:"space-y-4 print:space-y-3",children:t.map(a=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 print:mb-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1 print:mb-0.5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 print:text-sm whitespace-pre",children:a.title}),e.jsx("span",{className:"text-sm text-gray-600 whitespace-pre",children:a.subtitle})]}),a.secondarySubtitle&&e.jsx("div",{className:"text-sm text-gray-700 font-medium whitespace-pre",children:a.secondarySubtitle})]}),(a.startDate||a.endDate)&&e.jsxs("div",{className:"text-sm text-gray-600 ml-4 shrink-0 whitespace-pre",children:[a.startDate," ",a.startDate&&a.endDate&&"-"," ",a.endDate]})]}),a.description&&e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap pl-0 mt-2 print:mt-1",children:a.description})]},a.id))}),wa=({data:t})=>e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.content}),Ca=t=>{const[a,s]=g.useState(!1),{handleTimelineSave:n,handleListSave:r,handleTextSave:i}=Ye(t.id),l=()=>t.editorType||"timeline",o=()=>{s(!0)},c=()=>{s(!1)},d=(u,x)=>{const j=l();j==="timeline"?n(u,x):j==="list"?r(u,x):i(u,x)},m=()=>{const u=l(),x={isOpen:a,onClose:c,onSave:d,title:t.title,currentIcon:t.iconName||"briefcase"};return u==="timeline"?{...x,initialData:t.data}:u==="list"?{...x,initialData:t.data}:{...x,initialData:t.data}};return{isEditing:a,editorType:l(),startEditing:o,closeEditing:c,handleSave:d,getEditorProps:m}},Ia=({section:t,isEditable:a})=>{const{isEditing:s,editorType:n,startEditing:r,getEditorProps:i}=Ca(t),l=()=>n==="list"?e.jsx(Na,{data:t.data}):n==="text"?e.jsx(wa,{data:t.data}):e.jsx(Sa,{data:t.data}),o=()=>{if(!s)return null;const c=i();switch(n){case"text":return e.jsx(pa,{...c,initialData:c.initialData,selectedIcon:t.iconName||"briefcase",iconEnabled:!0});case"list":return e.jsx(ga,{...c,initialData:c.initialData});case"timeline":default:return e.jsx(ja,{...c,initialData:c.initialData})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[a&&e.jsx(w,{variant:"ghost",size:"icon",className:"absolute top-[.5rem] right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-10",onClick:r,children:e.jsx(Oe,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"mb-6 print:mb-6",children:[e.jsxs("div",{className:"flex items-center pb-[.5rem] border-b-gray-400 border-b-[1px]",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.title}),t.iconName&&e.jsx("div",{className:"p-2",children:e.jsx(ee,{iconName:t.iconName,className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-[.5rem]",children:l()})]})]}),o()]})},Ee=({resume:t,isEditable:a,pageNumber:s=1})=>{const n=()=>t.sections.find(c=>c.type==="basic"),r=()=>t.sections.filter(c=>c.type==="timeline"||c.type==="list"||c.type==="text"),i=n(),l=r().filter(c=>c.visible).filter(c=>t.pageSettings?.enableMultiPage?(c.pageNumber||1)===s:!0).sort((c,d)=>c.order-d.order),o=s===1;return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-lg print:shadow-none print:max-w-none",children:[o&&i&&e.jsx(ya,{section:i,isEditable:a}),l.length>0&&e.jsx("div",{className:`px-8 pb-8 print:px-6 print:pb-6 ${s!==1?"pt-8":""}`,children:e.jsx("div",{className:"space-y-6 print:space-y-4",children:l.map(c=>e.jsx(Ia,{section:c,isEditable:a},c.id))})})]})},Da=({resume:t,isEditable:a=!1,className:s=""})=>{if(!t.pageSettings?.enableMultiPage||t.pageSettings.totalPages<=1)return e.jsx("div",{className:`print-container ${s}`,children:e.jsx(Ee,{resume:t,isEditable:a})});const n=t.pageSettings.totalPages;return e.jsx("div",{className:`print-container ${s}`,children:e.jsx("div",{className:"space-y-8 print:space-y-0",children:Array.from({length:n},(r,i)=>{const l=i+1;return e.jsx("div",{className:"print:page-break-after-always print:page-break-inside-avoid",children:e.jsx(Ee,{resume:t,isEditable:a,pageNumber:l})},l)})})})},Ea=()=>{const t=W(P),{clearResume:a}=ue(),[s,n]=g.useState(!1),[r,i]=g.useState(!1),l=()=>{window.open("./preview","_blank")},o=()=>{a(),n(!1)},c=()=>{i(!0)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[e.jsx(ta,{children:e.jsx(Xs,{onPreview:l,onClear:()=>n(!0),onManageResume:c})}),e.jsx("main",{className:"max-w-6xl mx-auto p-4",children:e.jsx(Da,{resume:t,isEditable:!0,className:"min-h-screen"})}),e.jsx(Es,{isOpen:s,onClose:()=>n(!1),onConfirm:o}),e.jsx(Ks,{isOpen:r,onClose:()=>i(!1)}),e.jsx(ea,{})]})},ka=()=>e.jsx(Ea,{}),Pa=ke.lazy(()=>Ve(()=>import("./PreviewPage-DP4BcZU1.js"),__vite__mapDeps([10,1,2,7,6,3,8,9])).then(t=>({default:t.PreviewPage})));function Ta(){return e.jsx(nt,{children:e.jsx(Cs,{children:e.jsx(hs,{children:e.jsxs(ps,{children:[e.jsx(we,{path:"/",element:e.jsx(ka,{})}),e.jsx(we,{path:"/preview",element:e.jsx(g.Suspense,{fallback:null,children:e.jsx(Pa,{})})})]})})})})}et.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Ta,{})}));export{w as B,K as D,Da as R,fe as T,be as a,je as b,z as c,$a as d,js as e,J as f,Q as g,G as h,H as i,P as r,Zs as u};
